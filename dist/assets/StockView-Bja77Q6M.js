import{c as n,b as e,o as d,d as O,r as m,i as C,e as S,j as u,g as I,k as a,B as R,t as r,n as V,F as x,q as v,f as c,v as f,p as _,w as E,G as j,x as $}from"./index-DShiURXh.js";import{r as z}from"./PlusIcon-3nd0CGQo.js";import{r as F}from"./ArrowUpIcon-CgKOcxby.js";import{r as G}from"./EyeIcon-CxW4dXFA.js";import{r as X}from"./PencilIcon-BUBQsvjv.js";import{r as H}from"./TrashIcon-fFiWIMmY.js";function K(B,i){return d(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})])}const Q={class:"space-y-6"},W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Y={class:"grid grid-cols-1 sm:grid-cols-4 gap-6"},Z={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-100"},ee={class:"flex items-center"},te={class:"h-12 w-12 rounded-xl bg-blue-100 flex items-center justify-center"},se={class:"ml-4"},oe={class:"text-2xl font-bold text-gray-900"},re={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-100"},le={class:"flex items-center"},ie={class:"h-12 w-12 rounded-xl bg-red-100 flex items-center justify-center"},ne={class:"ml-4"},de={class:"text-2xl font-bold text-gray-900"},ue={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-100"},ae={class:"flex items-center"},ce={class:"h-12 w-12 rounded-xl bg-green-100 flex items-center justify-center"},ge={class:"ml-4"},me={class:"text-2xl font-bold text-gray-900"},xe={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-100"},ve={class:"flex items-center"},fe={class:"h-12 w-12 rounded-xl bg-orange-100 flex items-center justify-center"},be={class:"ml-4"},pe={class:"text-2xl font-bold text-gray-900"},ye={key:0,class:"bg-red-50 border border-red-200 rounded-2xl p-6"},we={class:"flex items-center mb-4"},_e={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},he={class:"flex items-center justify-between mb-2"},ke={class:"font-medium text-gray-900"},Ce={class:"text-sm text-red-600 font-medium"},Se={class:"text-sm text-gray-600 mb-2"},qe={class:"w-full bg-gray-200 rounded-full h-2"},Me={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-100"},Ae={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Ve={class:"flex items-center space-x-4"},je=["value"],$e={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Fe={class:"flex items-start justify-between mb-4"},Be={class:"flex-1"},Ne={class:"text-lg font-semibold text-gray-900"},Le={class:"text-sm text-gray-600"},Ue={class:"flex items-center space-x-2"},Je={class:"flex items-center space-x-1"},Pe=["onClick"],Te=["onClick"],De=["onClick"],Oe=["onClick"],Ie={class:"grid grid-cols-2 gap-4 mb-4"},Re={class:"text-lg font-bold text-gray-900"},Ee={class:"text-lg font-bold text-gray-900"},ze={class:"text-sm text-gray-900"},Ge={class:"text-sm text-gray-900"},Xe={class:"mb-4"},He={class:"flex items-center justify-between mb-1"},Ke={class:"text-sm text-gray-500"},Qe={class:"w-full bg-gray-200 rounded-full h-2"},We={class:"border-t border-gray-200 pt-4"},Ye={class:"flex items-center justify-between text-sm"},Ze={class:"text-gray-600"},et={class:"text-gray-500"},tt={key:0,class:"text-sm text-gray-600 mt-2"},st={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ot={class:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-2xl bg-white"},rt={class:"mt-3"},lt={class:"text-lg font-semibold text-gray-900 mb-4"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nt=["value"],dt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ut=["value"],at={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct=["value"],gt={class:"flex justify-end space-x-3 pt-4"},mt={type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-orange-500 hover:bg-orange-600 rounded-lg transition-colors"},wt=O({__name:"StockView",setup(B){const i=m([{id:1,nom:"Briques standard",categorie:"Briques",stock:2500,seuilCritique:1e3,unite:"pièces",prix:.85,fournisseur:"Briqueterie du Nord",derniereMiseAJour:"2024-01-15",notes:"Stock stable"},{id:2,nom:"Ciment Portland",categorie:"Matériaux",stock:45,seuilCritique:30,unite:"tonnes",prix:120,fournisseur:"Ciments Calcia",derniereMiseAJour:"2024-01-14",notes:"Stock critique - commande en cours"},{id:3,nom:"Granit concassé",categorie:"Matériaux",stock:85,seuilCritique:20,unite:"tonnes",prix:45,fournisseur:"Carrières de Bretagne",derniereMiseAJour:"2024-01-13"},{id:4,nom:"Palettes bois",categorie:"Emballage",stock:120,seuilCritique:50,unite:"unités",prix:15,fournisseur:"Palettes Express",derniereMiseAJour:"2024-01-12"}]),y=m(!1),g=m(null),w=m(""),b=m(""),l=m({nom:"",categorie:"",stock:0,seuilCritique:0,unite:"",prix:0,fournisseur:"",notes:""}),q=["Briques","Matériaux","Emballage","Outillage","Consommables"],N=["pièces","tonnes","kg","unités","mètres","litres"],L=["Briqueterie du Nord","Ciments Calcia","Carrières de Bretagne","Palettes Express","Matériaux Plus","Fournitures Pro"],U=C(()=>{let o=i.value;return w.value&&(o=o.filter(t=>t.categorie===w.value)),b.value&&(o=o.filter(t=>t.nom.toLowerCase().includes(b.value.toLowerCase())||t.fournisseur.toLowerCase().includes(b.value.toLowerCase()))),o}),h=C(()=>i.value.filter(o=>o.stock<=o.seuilCritique)),J=C(()=>i.value.reduce((o,t)=>o+t.stock*t.prix,0)),M=o=>{o?(g.value=o,l.value={...o,notes:o.notes||""}):(g.value=null,l.value={nom:"",categorie:"",stock:0,seuilCritique:0,unite:"",prix:0,fournisseur:"",notes:""}),y.value=!0},P=()=>{if(g.value){const o=i.value.findIndex(t=>t.id===g.value.id);i.value[o]={...l.value,id:g.value.id,derniereMiseAJour:new Date().toISOString().split("T")[0]}}else{const o=Math.max(...i.value.map(t=>t.id))+1;i.value.push({...l.value,id:o,derniereMiseAJour:new Date().toISOString().split("T")[0]})}y.value=!1,g.value=null},T=o=>{confirm("Êtes-vous sûr de vouloir supprimer cet article ?")&&(i.value=i.value.filter(t=>t.id!==o))},A=(o,t)=>{const s=i.value.findIndex(p=>p.id===o.id);i.value[s]={...o,stock:Math.max(0,o.stock+t),derniereMiseAJour:new Date().toISOString().split("T")[0]}},k=o=>{const t=o.stock/o.seuilCritique;return t<=1?{color:"text-red-600",bg:"bg-red-100",text:"Critique"}:t<=2?{color:"text-yellow-600",bg:"bg-yellow-100",text:"Faible"}:{color:"text-green-600",bg:"bg-green-100",text:"Normal"}},D=o=>{const t=o.stock/o.seuilCritique;return t<=1?"bg-red-500":t<=2?"bg-yellow-500":"bg-green-500"};return(o,t)=>(d(),n("div",Q,[e("div",W,[t[13]||(t[13]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Gestion du Stock"),e("p",{class:"mt-2 text-gray-600"},"Suivi des articles et alertes de stock")],-1)),e("button",{onClick:t[0]||(t[0]=s=>M()),class:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-xl transition-colors"},[u(a(z),{class:"h-5 w-5 mr-2"}),t[12]||(t[12]=I(" Nouvel article ",-1))])]),e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[u(a(R),{class:"h-6 w-6 text-blue-600"})]),e("div",se,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-gray-600"},"Total articles",-1)),e("p",oe,r(i.value.length),1)])])]),e("div",re,[e("div",le,[e("div",ie,[u(a(V),{class:"h-6 w-6 text-red-600"})]),e("div",ne,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Stock critique",-1)),e("p",de,r(h.value.length),1)])])]),e("div",ue,[e("div",ae,[e("div",ce,[u(a(F),{class:"h-6 w-6 text-green-600"})]),e("div",ge,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-gray-600"},"Valeur stock",-1)),e("p",me,r(J.value.toLocaleString("fr-FR",{style:"currency",currency:"XOF"})),1)])])]),e("div",xe,[e("div",ve,[e("div",fe,[u(a(G),{class:"h-6 w-6 text-orange-600"})]),e("div",be,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-600"},"Catégories",-1)),e("p",pe,r(new Set(i.value.map(s=>s.categorie)).size),1)])])])]),h.value.length>0?(d(),n("div",ye,[e("div",we,[u(a(V),{class:"h-6 w-6 text-red-600 mr-2"}),t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-red-900"},"Alertes Stock Critique",-1))]),e("div",_e,[(d(!0),n(x,null,v(h.value,s=>(d(),n("div",{key:s.id,class:"bg-white rounded-xl p-4 border border-red-200"},[e("div",he,[e("h4",ke,r(s.nom),1),e("span",Ce,r(s.stock)+" "+r(s.unite),1)]),e("p",Se,"Seuil: "+r(s.seuilCritique)+" "+r(s.unite),1),e("div",qe,[e("div",{class:"h-2 bg-red-500 rounded-full",style:j({width:`${Math.min(s.stock/s.seuilCritique*100,100)}%`})},null,4)])]))),128))])])):S("",!0),e("div",Me,[e("div",Ae,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4 sm:mb-0"},"Articles en stock",-1)),e("div",Ve,[c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),type:"text",placeholder:"Rechercher un article...",class:"rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},null,512),[[f,b.value]]),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>w.value=s),class:"rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},[t[19]||(t[19]=e("option",{value:""},"Toutes les catégories",-1)),(d(),n(x,null,v(q,s=>e("option",{key:s,value:s},r(s),9,je)),64))],512),[[_,w.value]])])])]),e("div",$e,[(d(!0),n(x,null,v(U.value,s=>(d(),n("div",{key:s.id,class:"bg-white rounded-2xl shadow-md border border-gray-100 p-6"},[e("div",Fe,[e("div",Be,[e("h4",Ne,r(s.nom),1),e("p",Le,r(s.categorie),1)]),e("div",Ue,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-medium rounded-full",k(s).bg+" "+k(s).color])},r(k(s).text),3),e("div",Je,[e("button",{onClick:p=>A(s,10),class:"text-green-600 hover:text-green-900",title:"Ajouter 10"},[u(a(F),{class:"h-4 w-4"})],8,Pe),e("button",{onClick:p=>A(s,-10),class:"text-red-600 hover:text-red-900",title:"Retirer 10"},[u(a(K),{class:"h-4 w-4"})],8,Te),e("button",{onClick:p=>M(s),class:"text-orange-600 hover:text-orange-900",title:"Modifier"},[u(a(X),{class:"h-4 w-4"})],8,De),e("button",{onClick:p=>T(s.id),class:"text-red-600 hover:text-red-900",title:"Supprimer"},[u(a(H),{class:"h-4 w-4"})],8,Oe)])])]),e("div",Ie,[e("div",null,[t[21]||(t[21]=e("p",{class:"text-sm font-medium text-gray-700"},"Stock actuel",-1)),e("p",Re,r(s.stock.toLocaleString())+" "+r(s.unite),1)]),e("div",null,[t[22]||(t[22]=e("p",{class:"text-sm font-medium text-gray-700"},"Prix unitaire",-1)),e("p",Ee,r(s.prix.toLocaleString("fr-FR",{style:"currency",currency:"XOF"})),1)]),e("div",null,[t[23]||(t[23]=e("p",{class:"text-sm font-medium text-gray-700"},"Seuil critique",-1)),e("p",ze,r(s.seuilCritique.toLocaleString())+" "+r(s.unite),1)]),e("div",null,[t[24]||(t[24]=e("p",{class:"text-sm font-medium text-gray-700"},"Valeur stock",-1)),e("p",Ge,r((s.stock*s.prix).toLocaleString("fr-FR",{style:"currency",currency:"XOF"})),1)])]),e("div",Xe,[e("div",He,[t[25]||(t[25]=e("span",{class:"text-sm font-medium text-gray-700"},"Niveau de stock",-1)),e("span",Ke,r(Math.round(s.stock/s.seuilCritique*100))+"%",1)]),e("div",Qe,[e("div",{class:$(["h-2 rounded-full transition-all duration-300",D(s)]),style:j({width:`${Math.min(s.stock/s.seuilCritique*100,100)}%`})},null,6)])]),e("div",We,[e("div",Ye,[e("span",Ze,"Fournisseur: "+r(s.fournisseur),1),e("span",et,"MAJ: "+r(new Date(s.derniereMiseAJour).toLocaleDateString("fr-FR")),1)]),s.notes?(d(),n("p",tt,r(s.notes),1)):S("",!0)])]))),128))]),y.value?(d(),n("div",st,[e("div",ot,[e("div",rt,[e("h3",lt,r(g.value?"Modifier l'article":"Nouvel article"),1),e("form",{onSubmit:E(P,["prevent"]),class:"space-y-4"},[e("div",it,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de l'article",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.nom=s),type:"text",required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},null,512),[[f,l.value.nom]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.categorie=s),required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},[t[27]||(t[27]=e("option",{value:""},"Sélectionner une catégorie",-1)),(d(),n(x,null,v(q,s=>e("option",{key:s,value:s},r(s),9,nt)),64))],512),[[_,l.value.categorie]])])]),e("div",dt,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stock actuel",-1)),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.stock=s),type:"number",required:"",min:"0",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},null,512),[[f,l.value.stock,void 0,{number:!0}]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Seuil critique",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.seuilCritique=s),type:"number",required:"",min:"0",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},null,512),[[f,l.value.seuilCritique,void 0,{number:!0}]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Unité",-1)),c(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.unite=s),required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},[t[31]||(t[31]=e("option",{value:""},"Sélectionner une unité",-1)),(d(),n(x,null,v(N,s=>e("option",{key:s,value:s},r(s),9,ut)),64))],512),[[_,l.value.unite]])])]),e("div",at,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix unitaire (€)",-1)),c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.prix=s),type:"number",required:"",min:"0",step:"0.01",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},null,512),[[f,l.value.prix,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fournisseur",-1)),c(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.fournisseur=s),required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500"},[t[34]||(t[34]=e("option",{value:""},"Sélectionner un fournisseur",-1)),(d(),n(x,null,v(L,s=>e("option",{key:s,value:s},r(s),9,ct)),64))],512),[[_,l.value.fournisseur]])])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),c(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.notes=s),rows:"3",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500",placeholder:"Notes optionnelles..."},null,512),[[f,l.value.notes]])]),e("div",gt,[e("button",{type:"button",onClick:t[11]||(t[11]=s=>y.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"}," Annuler "),e("button",mt,r(g.value?"Modifier":"Ajouter"),1)])],32)])])])):S("",!0)]))}});export{wt as default};
