import{d as ge,u as H,O as be,z as fe,a as f,A as _e,l as g,c as u,e,s as c,f as d,E as S,j as p,h,t as a,D as q,M as P,N as D,F as R,H as j,i as m,v as w,m as V,I as _,J as y,w as ye,K as z,L as G,n as J,o as r,_ as xe}from"./main-C7B5hG3I.js";import{r as he,a as we,b as Ce}from"./TrashIcon-DBaqJnjP.js";import{r as ke}from"./CalendarIcon-DAmy8_jU.js";const qe={class:"commandes-container"},Ve={class:"commandes-header"},$e={class:"header-content"},Se={class:"header-main"},De={class:"flex items-center"},Ee={class:"h-12 w-12 rounded-2xl bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center mr-4 shadow-lg"},Le={class:"flex items-center space-x-4"},Me={class:"main-content"},Ie={class:"stats-grid"},Pe={class:"stat-card"},Ue={class:"stat-content"},Ne={class:"stat-icon-wrapper stat-blue"},Te={class:"stat-details"},Ae={class:"stat-value"},je={class:"stat-card"},Be={class:"stat-content"},Fe={class:"stat-icon-wrapper stat-yellow"},Oe={class:"stat-details"},He={class:"stat-value"},Re={key:0,class:"stat-badge"},ze={class:"stat-card"},Ge={class:"stat-content"},Je={class:"stat-icon-wrapper stat-orange"},Ke={class:"stat-details"},Qe={class:"stat-value"},We={class:"stat-card"},Xe={class:"stat-content"},Ye={class:"stat-icon-wrapper stat-green"},Ze={class:"stat-details"},et={class:"stat-value"},tt={class:"secondary-stats-grid"},st={class:"secondary-stat-card"},ot={class:"secondary-stat-content"},nt={class:"secondary-stat-icon stat-red"},at={class:"secondary-stat-value"},lt={class:"secondary-stat-card"},it={class:"secondary-stat-content"},rt={class:"secondary-stat-icon stat-orange"},dt={class:"secondary-stat-value"},ut={class:"secondary-stat-card"},ct={class:"secondary-stat-content"},mt={class:"secondary-stat-icon stat-green"},vt={class:"secondary-stat-value"},pt={class:"filters-card"},gt={class:"filters-header"},bt={class:"flex items-center"},ft={class:"h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center mr-3 shadow-lg"},_t={class:"filters-content"},yt={class:"filters-row"},xt={class:"filter-item"},ht={class:"filter-item"},wt=["value"],Ct={class:"filter-item"},kt=["value"],qt={class:"commandes-list"},Vt={class:"commande-content"},$t={class:"commande-main"},St={class:"commande-header"},Dt={class:"commande-info"},Et={class:"flex items-center space-x-3 mb-2"},Lt={class:"commande-icon"},Mt={class:"commande-title"},It={class:"commande-client"},Pt={class:"commande-badges"},Ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Nt={class:"text-sm text-gray-900"},Tt={class:"text-sm text-gray-900"},At={class:"text-sm text-gray-900"},jt={class:"mb-4"},Bt={class:"text-sm text-gray-900"},Ft={class:"mb-4"},Ot={class:"space-y-2"},Ht={class:"flex justify-between items-center mb-2"},Rt={class:"text-sm font-medium text-gray-900"},zt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Gt={class:"grid grid-cols-3 gap-2 text-xs"},Jt={class:"font-medium text-gray-900 ml-1"},Kt={class:"font-medium text-gray-900 ml-1"},Qt={class:"font-medium text-gray-900 ml-1"},Wt={class:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200"},Xt={class:"flex items-center justify-between mb-2"},Yt={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Zt={class:"grid grid-cols-2 gap-4 text-xs"},es={class:"font-medium text-blue-900 ml-1"},ts={class:"commande-actions"},ss={class:"actions-grid"},os=["onClick"],ns=["onClick"],as=["onClick"],ls=["onClick"],is=["onClick"],rs={key:0,class:"modal-overlay"},ds={class:"modal-container"},us={class:"modal-header"},cs={class:"modal-header-content"},ms={class:"flex items-center space-x-3"},vs={class:"modal-icon"},ps={class:"modal-title"},gs={class:"p-6"},bs={class:"bg-gray-50 rounded-xl p-4"},fs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_s=["value"],ys={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xs={class:"bg-gray-50 rounded-xl p-4"},hs={class:"space-y-4"},ws=["value"],Cs={class:"bg-gray-50 rounded-xl p-4"},ks={class:"space-y-4"},qs={class:"bg-gray-50 rounded-xl p-4"},Vs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$s={class:"bg-gray-50 rounded-xl p-4"},Ss={class:"space-y-4"},Ds=["onUpdate:modelValue"],Es=["value"],Ls=["onUpdate:modelValue"],Ms=["onUpdate:modelValue"],Is={class:"flex items-center"},Ps=["onClick"],Us={class:"modal-footer"},Ns={class:"modal-footer-content"},Ts={type:"submit",form:"commande-form",class:"btn-submit"},As=ge({__name:"CommandesView",setup(js){const{getCommandes:K,addCommande:Q,updateCommande:U,deleteCommande:W,getArticles:Bs,addLivraison:X}=H(),N=be(),{canDeleteCommandes:Y}=fe(),b=f([]),$=f(!1),x=f(null),E=f(""),L=f(""),T=f("");_e(async()=>{await C(),await ee()});const C=async()=>{try{console.log("üîç [CommandesView] Chargement des commandes"),b.value=await K(),console.log("‚úÖ [CommandesView] Commandes charg√©es:",b.value.length)}catch(o){console.error("‚ùå [CommandesView] Erreur lors du chargement des commandes:",o),alert("Erreur lors du chargement des commandes")}},i=f({client:"",telephone:"",adresse:"",produits:[{nom:"",quantite:0,unite:"pi√®ces"}],statut:"en_attente",numero_commande:"",date:new Date().toISOString().split("T")[0],date_livraison_souhaitee:"",priorite:"normale"}),M=[{value:"en_attente",label:"En attente",color:"bg-yellow-100 text-yellow-800",icon:q},{value:"confirmee",label:"Confirm√©e",color:"bg-blue-100 text-blue-800",icon:D},{value:"en_preparation",label:"En pr√©paration",color:"bg-orange-100 text-orange-800",icon:S},{value:"pret",label:"Pr√™t",color:"bg-purple-100 text-purple-800",icon:j},{value:"livree",label:"Livr√©e",color:"bg-green-100 text-green-800",icon:R},{value:"annulee",label:"Annul√©e",color:"bg-red-100 text-red-800",icon:P}],Z=[{value:"non_livre",label:"Non livr√©",color:"bg-red-100 text-red-800",icon:P},{value:"partiellement_livre",label:"Partiellement livr√©",color:"bg-orange-100 text-orange-800",icon:q},{value:"livre",label:"Livr√©",color:"bg-green-100 text-green-800",icon:D}],k=f([]),ee=async()=>{try{const{getArticles:o}=H(),t=await o();k.value=t.map(s=>({nom:s.nom,stock:s.stock,unite:s.unite,prix:s.prix}))}catch(o){console.error("Erreur lors du chargement du stock:",o),k.value=[]}},A=[{value:"basse",label:"Basse",color:"bg-gray-100 text-gray-800"},{value:"normale",label:"Normale",color:"bg-blue-100 text-blue-800"},{value:"haute",label:"Haute",color:"bg-orange-100 text-orange-800"},{value:"urgente",label:"Urgente",color:"bg-red-100 text-red-800"}],B=o=>{o?(x.value=o,i.value={...o,statut:o.statut,priorite:o.priorite,date_livraison_souhaitee:o.date_livraison_souhaitee||""}):(x.value=null,i.value={client:"",telephone:"",adresse:"",produits:[{nom:"",quantite:0,unite:"pi√®ces"}],statut:"en_attente",numero_commande:`CMD-${Date.now()}`,date:new Date().toISOString().split("T")[0],date_livraison_souhaitee:"",priorite:"normale"}),$.value=!0},te=async()=>{try{console.log("üîç [CommandesView] Sauvegarde de la commande");const o=i.value.produits.filter(s=>s.nom.trim()&&s.quantite>0&&s.unite.trim()),t={...i.value,produits:o,numero_commande:i.value.numero_commande||`CMD-${Date.now()}`,date:i.value.date||new Date().toISOString().split("T")[0]};x.value?(await U(x.value.id,t),console.log("‚úÖ [CommandesView] Commande mise √† jour")):(await Q(t),console.log("‚úÖ [CommandesView] Commande cr√©√©e")),await C(),$.value=!1,x.value=null,alert("Commande enregistr√©e avec succ√®s!")}catch(o){console.error("‚ùå [CommandesView] Erreur lors de la sauvegarde:",o),alert("Erreur lors de la sauvegarde de la commande")}},se=async o=>{if(confirm("√ätes-vous s√ªr de vouloir supprimer cette commande ?"))try{console.log("üîç [CommandesView] Suppression de la commande:",o),await W(o)?(await C(),console.log("‚úÖ [CommandesView] Commande supprim√©e"),alert("Commande supprim√©e avec succ√®s")):alert("Erreur lors de la suppression de la commande")}catch(t){console.error("‚ùå [CommandesView] Erreur lors de la suppression:",t),alert("Erreur lors de la suppression de la commande: "+(t instanceof Error?t.message:"Erreur inconnue"))}},oe=async o=>{const t=k.value,s=[];if(o.produits.forEach(n=>{const l=t.find(v=>v.nom===n.nom);l?l.stock<n.quantite&&s.push(`${n.nom} (stock: ${l.stock}, demand√©: ${n.quantite})`):s.push(`${n.nom} (article inexistant)`)}),s.length>0){alert(`Impossible de confirmer la commande. Stock insuffisant pour:
${s.join(`
`)}`);return}try{console.log("üîç [CommandesView] Confirmation de la commande:",o.numero_commande),await U(o.id,{statut:"confirmee"}),console.log("‚úÖ [CommandesView] Commande confirm√©e"),console.log("üîç [CommandesView] Cr√©ation automatique de la livraison...");const n={numero_bl:`BL-${Date.now()}`,date:new Date().toISOString().split("T")[0],client:o.client,telephone:o.telephone,chauffeur:"",produits:o.produits.map(v=>({nom:v.nom,quantite:v.quantite,unite:v.unite,quantite_commandee:v.quantite,quantite_livree:0,difference:v.quantite,reste_a_payer:0,notes:""})),statut:"en_attente",adresse:o.adresse,code_suivi:`CS-${Date.now()}`,total_commande:0,total_livraison:0,difference_totale:0,reste_a_payer_total:0},l=await X(n);console.log("‚úÖ [CommandesView] Livraison cr√©√©e automatiquement:",l),await C(),alert(`Commande confirm√©e avec succ√®s!
Livraison ${n.numero_bl} cr√©√©e automatiquement.`)}catch(n){console.error("‚ùå [CommandesView] Erreur lors de la confirmation:",n),alert("Erreur lors de la confirmation de la commande ou cr√©ation de la livraison")}},ne=async o=>{const t=k.value,s=[];if(o.produits.forEach(n=>{const l=t.find(v=>v.nom===n.nom);l?l.stock<n.quantite&&s.push(`${n.nom} (stock: ${l.stock}, demand√©: ${n.quantite})`):s.push(`${n.nom} (article inexistant)`)}),s.length>0){alert(`Impossible de pr√©parer la commande. Stock insuffisant pour:
${s.join(`
`)}`);return}try{await U(o.id,{statut:"en_preparation"}),await C(),alert("Commande mise en pr√©paration!")}catch(n){console.error("Erreur lors de la pr√©paration:",n),alert("Erreur lors de la pr√©paration de la commande")}},ae=async o=>{const t=k.value,s=[];if(o.produits.forEach(n=>{const l=t.find(v=>v.nom===n.nom);l?l.stock<n.quantite&&s.push(`${n.nom} (stock: ${l.stock}, demand√©: ${n.quantite})`):s.push(`${n.nom} (article inexistant)`)}),s.length>0){alert(`Impossible de marquer la commande comme pr√™te. Stock insuffisant pour:
${s.join(`
`)}`);return}try{console.log("üîç [CommandesView] Marquage de la commande comme pr√™te:",o.numero_commande);const n=await N.post(N.endpoints.commandes.marquerPret(o.id));N.debug("Commande marqu√©e comme pr√™te et livraison cr√©√©e:",n),await C(),alert(n.message||"Commande marqu√©e comme pr√™te et livraison cr√©√©e automatiquement!")}catch(n){console.error("‚ùå [CommandesView] Erreur lors du marquage comme pr√™t:",n),alert("Erreur lors du marquage de la commande comme pr√™te: "+n.message)}},le=()=>{i.value.produits.push({nom:"",quantite:0,unite:"pi√®ces"})},ie=o=>{i.value.produits.splice(o,1)},I=o=>M.find(t=>t.value===o)||M[0],F=o=>A.find(t=>t.value===o)||A[1],re=g(()=>{let o=b.value;return E.value&&(o=o.filter(t=>t.date===E.value)),L.value&&(o=o.filter(t=>t.statut===L.value)),T.value,o.sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime())}),de=g(()=>b.value.length),O=g(()=>b.value.filter(o=>o.statut==="en_attente").length),ue=g(()=>b.value.filter(o=>o.statut==="confirmee").length),ce=g(()=>b.value.filter(o=>o.statut==="en_preparation").length);g(()=>b.value.filter(o=>o.statut==="pret").length);const me=g(()=>0),ve=g(()=>0),pe=g(()=>0);return(o,t)=>(r(),u("div",qe,[e("div",Ve,[e("div",$e,[e("div",Se,[e("div",De,[e("div",Ee,[c(d(S),{class:"h-6 w-6 text-white"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"page-title"},"Commandes Clients"),e("p",{class:"page-subtitle"},"Gestion des commandes et g√©n√©ration des livraisons")],-1))]),e("div",Le,[e("button",{onClick:t[0]||(t[0]=s=>B()),class:"action-button"},[c(d(he),{class:"h-5 w-5 mr-2"}),t[14]||(t[14]=p(" Nouvelle commande ",-1))])])])])]),e("div",Me,[e("div",Ie,[e("div",Pe,[e("div",Ue,[e("div",Ne,[c(d(S),{class:"stat-icon"})]),e("div",Te,[t[15]||(t[15]=e("dt",{class:"stat-label"},"Total commandes",-1)),e("dd",Ae,a(de.value),1),t[16]||(t[16]=e("dd",{class:"stat-unit"},"commandes",-1))])])]),e("div",je,[e("div",Be,[e("div",Fe,[c(d(q),{class:"stat-icon"})]),e("div",Oe,[t[17]||(t[17]=e("dt",{class:"stat-label"},"En attente",-1)),e("dd",He,a(O.value),1),t[18]||(t[18]=e("dd",{class:"stat-unit"},"√† traiter",-1))]),O.value>0?(r(),u("div",Re,[c(d(P),{class:"h-4 w-4 text-yellow-600"})])):h("",!0)])]),e("div",ze,[e("div",Ge,[e("div",Je,[c(d(D),{class:"stat-icon"})]),e("div",Ke,[t[19]||(t[19]=e("dt",{class:"stat-label"},"Confirm√©es",-1)),e("dd",Qe,a(ue.value),1),t[20]||(t[20]=e("dd",{class:"stat-unit"},"valid√©es",-1))])])]),e("div",We,[e("div",Xe,[e("div",Ye,[c(d(R),{class:"stat-icon"})]),e("div",Ze,[t[21]||(t[21]=e("dt",{class:"stat-label"},"En pr√©paration",-1)),e("dd",et,a(ce.value),1),t[22]||(t[22]=e("dd",{class:"stat-unit"},"actives",-1))])])])]),e("div",tt,[e("div",st,[e("div",ot,[e("div",nt,[c(d(P),{class:"h-5 w-5 text-white"})]),e("div",null,[t[23]||(t[23]=e("p",{class:"secondary-stat-label"},"Non livr√©es",-1)),e("p",at,a(me.value),1)])])]),e("div",lt,[e("div",it,[e("div",rt,[c(d(q),{class:"h-5 w-5 text-white"})]),e("div",null,[t[24]||(t[24]=e("p",{class:"secondary-stat-label"},"Partiellement livr√©es",-1)),e("p",dt,a(ve.value),1)])])]),e("div",ut,[e("div",ct,[e("div",mt,[c(d(D),{class:"h-5 w-5 text-white"})]),e("div",null,[t[25]||(t[25]=e("p",{class:"secondary-stat-label"},"Livr√©es compl√®tement",-1)),e("p",vt,a(pe.value),1)])])])]),e("div",pt,[e("div",gt,[e("div",bt,[e("div",ft,[c(d(j),{class:"h-5 w-5 text-white"})]),t[26]||(t[26]=e("div",null,[e("h3",{class:"chart-title"},"Commandes r√©centes"),e("p",{class:"chart-subtitle"},"Filtres et recherche avanc√©e")],-1))])]),e("div",_t,[e("div",yt,[e("div",xt,[c(d(ke),{class:"filter-icon"}),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>E.value=s),type:"date",class:"filter-input",placeholder:"Filtrer par date"},null,512),[[w,E.value]])]),e("div",ht,[m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>L.value=s),class:"filter-select"},[t[27]||(t[27]=e("option",{value:""},"Tous les statuts",-1)),(r(),u(_,null,y(M,s=>e("option",{key:s.value,value:s.value},a(s.label),9,wt)),64))],512),[[V,L.value]])]),e("div",Ct,[m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>T.value=s),class:"filter-select"},[t[28]||(t[28]=e("option",{value:""},"Tous les √©tats de livraison",-1)),(r(),u(_,null,y(Z,s=>e("option",{key:s.value,value:s.value},a(s.label),9,kt)),64))],512),[[V,T.value]])])])])]),e("div",qt,[(r(!0),u(_,null,y(re.value,s=>(r(),u("div",{key:s.id,class:"commande-card"},[e("div",Vt,[e("div",$t,[e("div",St,[e("div",Dt,[e("div",Et,[e("div",Lt,[(r(),z(G(I(s.statut).icon),{class:"h-5 w-5 text-white"}))]),e("div",null,[e("h4",Mt,a(s.numero_commande),1),e("p",It,a(s.client),1)])])]),e("div",Pt,[e("span",{class:J(["status-badge",I(s.statut).color])},[(r(),z(G(I(s.statut).icon),{class:"h-3 w-3 mr-1"})),p(" "+a(I(s.statut).label),1)],2),e("span",{class:J(["priority-badge",F(s.priorite).color])},a(F(s.priorite).label),3)])]),e("div",Ut,[e("div",null,[t[29]||(t[29]=e("p",{class:"text-sm font-medium text-gray-700"},"Date de commande",-1)),e("p",Nt,a(new Date(s.date).toLocaleDateString("fr-FR")),1)]),e("div",null,[t[30]||(t[30]=e("p",{class:"text-sm font-medium text-gray-700"},"Livraison souhait√©e",-1)),e("p",Tt,a(s.date_livraison_souhaitee?new Date(s.date_livraison_souhaitee).toLocaleDateString("fr-FR"):"Non sp√©cifi√©e"),1)]),e("div",null,[t[31]||(t[31]=e("p",{class:"text-sm font-medium text-gray-700"},"T√©l√©phone",-1)),e("p",At,a(s.telephone),1)])]),e("div",jt,[t[32]||(t[32]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Adresse de livraison",-1)),e("p",Bt,a(s.adresse),1)]),e("div",Ft,[t[37]||(t[37]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Produits command√©s",-1)),e("div",Ot,[(r(!0),u(_,null,y(s.produits,n=>(r(),u("div",{key:n.nom,class:"bg-gray-50 rounded-lg p-3"},[e("div",Ht,[e("span",Rt,a(n.nom),1),e("span",zt,[c(d(q),{class:"h-3 w-3 mr-1"}),t[33]||(t[33]=p(" Non livr√© ",-1))])]),e("div",Gt,[e("div",null,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Command√©:",-1)),e("span",Jt,a(n.quantite)+" "+a(n.unite),1)]),e("div",null,[t[35]||(t[35]=e("span",{class:"text-gray-600"},"Livr√©:",-1)),e("span",Kt,"0 "+a(n.unite),1)]),e("div",null,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Reste:",-1)),e("span",Qt,a(n.quantite)+" "+a(n.unite),1)])])]))),128))])]),e("div",Wt,[e("div",Xt,[t[39]||(t[39]=e("p",{class:"text-sm font-medium text-blue-900"},"√âtat global de livraison",-1)),e("span",Yt,[c(d(q),{class:"h-3 w-3 mr-1"}),t[38]||(t[38]=p(" Non livr√© ",-1))])]),e("div",Zt,[t[41]||(t[41]=e("div",null,[e("span",{class:"text-blue-600"},"Total livr√©:"),e("span",{class:"font-medium text-blue-900 ml-1"},"0")],-1)),e("div",null,[t[40]||(t[40]=e("span",{class:"text-blue-600"},"Total restant:",-1)),e("span",es,a(s.produits.reduce((n,l)=>n+l.quantite,0)),1)])])])]),e("div",ts,[e("div",ss,[s.statut==="en_attente"?(r(),u("button",{key:0,onClick:n=>oe(s),class:"action-btn action-btn-primary"},[c(d(D),{class:"h-4 w-4 mr-2"}),t[42]||(t[42]=p(" Confirmer ",-1))],8,os)):h("",!0),s.statut==="confirmee"?(r(),u("button",{key:1,onClick:n=>ne(s),class:"action-btn action-btn-orange"},[c(d(S),{class:"h-4 w-4 mr-2"}),t[43]||(t[43]=p(" Pr√©parer ",-1))],8,ns)):h("",!0),s.statut==="en_preparation"?(r(),u("button",{key:2,onClick:n=>ae(s),class:"action-btn action-btn-purple"},[c(d(j),{class:"h-4 w-4 mr-2"}),t[44]||(t[44]=p(" Marquer pr√™t ",-1))],8,as)):h("",!0),e("button",{onClick:n=>B(s),class:"action-btn action-btn-secondary"},[c(d(we),{class:"h-4 w-4 mr-2"}),t[45]||(t[45]=p(" Modifier ",-1))],8,ls),d(Y)?(r(),u("button",{key:3,onClick:n=>se(s.id),class:"action-btn action-btn-danger"},[c(d(Ce),{class:"h-4 w-4 mr-2"}),t[46]||(t[46]=p(" Supprimer ",-1))],8,is)):h("",!0)])])])]))),128))]),$.value?(r(),u("div",rs,[e("div",ds,[e("div",us,[e("div",cs,[e("div",ms,[e("div",vs,[c(d(S),{class:"h-6 w-6 text-white"})]),e("div",null,[e("h3",ps,a(x.value?"Modifier la commande":"Nouvelle commande"),1),t[47]||(t[47]=e("p",{class:"modal-subtitle"},"Gestion des commandes clients",-1))])]),e("button",{onClick:t[4]||(t[4]=s=>$.value=!1),class:"modal-close"},[...t[48]||(t[48]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",gs,[e("form",{id:"commande-form",onSubmit:ye(te,["prevent"]),class:"space-y-6"},[e("div",bs,[t[51]||(t[51]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Informations de suivi",-1)),e("div",fs,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Num√©ro de commande",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>i.value.numero_commande=s),type:"text",readonly:"",class:"w-full rounded-lg border-gray-300 bg-white text-gray-600"},null,512),[[w,i.value.numero_commande]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Priorit√©",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>i.value.priorite=s),required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white"},[(r(),u(_,null,y(A,s=>e("option",{key:s.value,value:s.value},a(s.label),9,_s)),64))],512),[[V,i.value.priorite]])])])]),e("div",ys,[e("div",xs,[t[53]||(t[53]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Informations de base",-1)),e("div",hs,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),m(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.statut=s),required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white"},[(r(),u(_,null,y(M,s=>e("option",{key:s.value,value:s.value},a(s.label),9,ws)),64))],512),[[V,i.value.statut]])])])]),e("div",Cs,[t[56]||(t[56]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Informations client",-1)),e("div",ks,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>i.value.client=s),type:"text",required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white",placeholder:"Nom du client"},null,512),[[w,i.value.client]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"T√©l√©phone",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>i.value.telephone=s),type:"tel",required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white",placeholder:"Num√©ro de t√©l√©phone"},null,512),[[w,i.value.telephone]])])])])]),e("div",qs,[t[59]||(t[59]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Informations de livraison",-1)),e("div",Vs,[e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse de livraison",-1)),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>i.value.adresse=s),type:"text",required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white",placeholder:"Adresse compl√®te"},null,512),[[w,i.value.adresse]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de livraison souhait√©e",-1)),m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>i.value.date_livraison_souhaitee=s),type:"date",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white"},null,512),[[w,i.value.date_livraison_souhaitee]])])])]),e("div",$s,[t[67]||(t[67]=e("h4",{class:"font-semibold text-gray-900 mb-3"},"Produits command√©s",-1)),e("div",Ss,[(r(!0),u(_,null,y(i.value.produits,(s,n)=>(r(),u("div",{key:n,class:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end"},[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Produit",-1)),m(e("select",{"onUpdate:modelValue":l=>s.nom=l,required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white"},[t[60]||(t[60]=e("option",{value:""},"S√©lectionner un produit",-1)),(r(!0),u(_,null,y(k.value,l=>(r(),u("option",{key:l.nom,value:l.nom},a(l.nom)+" (Stock: "+a(l.stock)+" "+a(l.unite)+") ",9,Es))),128))],8,Ds),[[V,s.nom]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Quantit√©",-1)),m(e("input",{"onUpdate:modelValue":l=>s.quantite=l,type:"number",required:"",min:"0",placeholder:"0",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white"},null,8,Ls),[[w,s.quantite,void 0,{number:!0}]])]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Unit√©",-1)),m(e("select",{"onUpdate:modelValue":l=>s.unite=l,required:"",class:"w-full rounded-lg border-gray-300 focus:border-orange-500 focus:ring-orange-500 bg-white"},[...t[63]||(t[63]=[e("option",{value:"pi√®ces"},"Pi√®ces",-1),e("option",{value:"tonnes"},"Tonnes",-1),e("option",{value:"m¬≥"},"m¬≥",-1),e("option",{value:"palettes"},"Palettes",-1)])],8,Ms),[[V,s.unite]])]),e("div",Is,[i.value.produits.length>1?(r(),u("button",{key:0,type:"button",onClick:l=>ie(n),class:"text-red-600 hover:text-red-800 p-2",title:"Supprimer ce produit"},[...t[65]||(t[65]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ps)):h("",!0)])]))),128)),e("button",{type:"button",onClick:le,class:"text-orange-600 hover:text-orange-800 text-sm font-medium flex items-center"},[...t[66]||(t[66]=[e("svg",{class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Ajouter un produit ",-1)])])])])],32)]),e("div",Us,[e("div",Ns,[e("button",{type:"button",onClick:t[12]||(t[12]=s=>$.value=!1),class:"btn-cancel"}," Annuler "),e("button",Ts,a(x.value?"Modifier la commande":"Cr√©er la commande"),1)])])])])):h("",!0)])]))}}),Rs=xe(As,[["__scopeId","data-v-2380ee5c"]]);export{Rs as default};
