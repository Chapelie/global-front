const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D0gnmK0b.js","assets/index-gg8QSVgM.css"])))=>i.map(i=>d[i]);
import{d as es,x as G,r as d,p as y,y as os,c as n,a as s,f as D,h as b,t as e,j as V,k as C,l as as,F as f,z as x,_ as ns,n as A,o as i,A as is}from"./index-D0gnmK0b.js";const ls={class:"dashboard-container"},ds={style:{background:"#f0f0f0",padding:"10px","margin-bottom":"20px","border-radius":"5px"}},rs={class:"dashboard-header"},cs={class:"header-content"},us={class:"header-actions"},vs=["disabled"],ms={key:0,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},hs={key:1,class:"animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ps={class:"dashboard-stats"},bs={class:"stat-card"},gs={class:"stat-content"},_s={class:"stat-value"},ks={class:"stat-card"},ws={class:"stat-content"},ys={class:"stat-value"},Ds={class:"stat-card"},Vs={class:"stat-content"},Cs={class:"stat-value"},fs={class:"stat-card"},xs={class:"stat-content"},As={class:"stat-value"},Ss={class:"dashboard-stats"},Ls={class:"stat-card bg-red-50 border-red-200"},Ms={class:"stat-content"},js={class:"stat-value text-red-600"},Is={class:"stat-card bg-green-50 border-green-200"},Ps={class:"stat-content"},Js={class:"stat-value text-green-600"},Ts={class:"stat-card bg-blue-50 border-blue-200"},Bs={class:"stat-content"},zs={class:"stat-value text-blue-600"},Es={class:"stat-card bg-purple-50 border-purple-200"},Ns={class:"stat-content"},Hs={class:"stat-value text-purple-600"},Rs={class:"stat-card bg-orange-50 border-orange-200"},Fs={class:"stat-content"},Xs={class:"stat-value text-orange-600"},Os={key:0,class:"dashboard-section"},qs={class:"week-production-grid"},Gs={class:"day-card"},Qs={class:"day-count"},Us={class:"day-card"},Zs={class:"day-count"},$s={class:"day-card"},Ws={class:"day-count"},Ys={class:"day-card"},Ks={class:"day-count"},st={class:"day-card"},tt={class:"day-count"},et={class:"day-card"},ot={class:"day-count"},at={class:"day-card"},nt={class:"day-count"},it={key:1,class:"error-message"},lt={key:2,class:"dashboard-content"},dt={class:"dashboard-section"},rt={class:"section-header"},ct={class:"section-content"},ut={key:0,class:"empty-state"},vt={key:1,class:"commande-list"},mt={class:"commande-info"},ht={class:"commande-numero"},pt={class:"commande-client"},bt={class:"commande-details"},gt={class:"commande-date"},_t={class:"dashboard-section"},kt={class:"section-header"},wt={class:"section-content"},yt={key:0,class:"empty-state"},Dt={key:1,class:"livraison-list"},Vt={class:"livraison-info"},Ct={class:"livraison-numero"},ft={class:"livraison-client"},xt={class:"livraison-details"},At={class:"livraison-date"},St={class:"dashboard-section"},Lt={class:"section-header"},Mt={class:"section-content"},jt={key:0,class:"empty-state"},It={key:1,class:"analyse-list"},Pt={class:"analyse-info"},Jt={class:"analyse-nom"},Tt={class:"analyse-type"},Bt={class:"analyse-details"},zt={class:"analyse-date"},Et=es({__name:"DashboardView",setup(Nt){const{getDashboardStats:S,getCommandes:L,getLivraisons:M,getAnalyses:j,getStockInfo:Q,getProductionsDuJour:U,getLivraisonsRecentes:Z,getProductionParSemaine:$}=G();console.log("üîß [DashboardView] Service import√©:",{getDashboardStats:!!S,getCommandes:!!L,getLivraisons:!!M,getAnalyses:!!j});const c=d({}),v=d([]),m=d([]),h=d([]),g=d({}),I=d({}),P=d({}),l=d({}),p=d(!1),u=d(null),J=y(()=>v.value.sort((a,t)=>new Date(t.date).getTime()-new Date(a.date).getTime()).slice(0,5)),T=y(()=>m.value.filter(a=>a.statut==="en_cours"||a.statut==="en_attente").sort((a,t)=>new Date(t.date).getTime()-new Date(a.date).getTime()).slice(0,5)),B=y(()=>h.value.sort((a,t)=>new Date(t.dateDebut).getTime()-new Date(a.dateDebut).getTime()).slice(0,5)),z=async()=>{console.log("üöÄ [DashboardView] loadDashboardData() - FONCTION APPEL√âE"),p.value=!0,u.value=null;try{console.log("üîç [DashboardView] Chargement des donn√©es du dashboard..."),console.log("üîç [DashboardView] V√©rification du mode Supabase...");const{getMode:a,isSupabaseEnabled:t}=G();console.log("üì° [DashboardView] Mode service:",a()),console.log("üì° [DashboardView] Supabase activ√©:",t()),console.log("üß™ [DashboardView] Test direct de Supabase...");try{const{createClient:w}=await ns(async()=>{const{createClient:ss}=await import("./index-D0gnmK0b.js").then(ts=>ts.T);return{createClient:ss}},__vite__mapDeps([0,1])),q=w("https://lowuuqsenzwnjypwihnr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxvd3V1cXNlbnp3bmp5cHdpaG5yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1Mzk0NTIsImV4cCI6MjA3NTExNTQ1Mn0.XujdMv651RimoX1WrXxKbW5UN7vrCXJx82tNh9_eG2U");console.log("üì° [DashboardView] Client Supabase cr√©√©:",!!q);const{data:Y,error:K}=await q.from("articles").select("count").limit(1);console.log("üì° [DashboardView] Test Supabase articles:",{data:Y,error:K})}catch(w){console.error("‚ùå [DashboardView] Erreur test Supabase:",w)}console.log("üîç [DashboardView] Appel de getDashboardStats()...");const r=await S();console.log("üìä [DashboardView] R√©ponse de getDashboardStats:",r),c.value={totalArticles:r.totalArticles||0,totalCommandes:r.totalCommandes||0,totalLivraisons:r.totalLivraisons||0,totalProductions:r.totalProductions||0},console.log("‚úÖ [DashboardView] Stats mapp√©es:",c.value),console.log("üîç [DashboardView] Appel de getCommandes()...");const o=await L();v.value=o,console.log("‚úÖ [DashboardView] Commandes charg√©es:",v.value.length,o.slice(0,2)),console.log("üîç [DashboardView] Appel de getLivraisons()...");const N=await M();m.value=N,console.log("‚úÖ [DashboardView] Livraisons charg√©es:",m.value.length,N.slice(0,2)),console.log("üîç [DashboardView] Appel de getAnalyses()...");const H=await j();h.value=H,console.log("‚úÖ [DashboardView] Analyses charg√©es:",h.value.length,H.slice(0,2)),console.log("üîç [DashboardView] Appel de getStockInfo()...");const R=await Q();g.value=R,console.log("‚úÖ [DashboardView] Stock charg√©:",R),console.log("üîç [DashboardView] Appel de getProductionsDuJour()...");const F=await U();I.value=F,console.log("‚úÖ [DashboardView] Productions du jour charg√©es:",F),console.log("üîç [DashboardView] Appel de getLivraisonsRecentes()...");const X=await Z();P.value=X,console.log("‚úÖ [DashboardView] Livraisons r√©centes charg√©es:",X),console.log("üîç [DashboardView] Appel de getProductionParSemaine()...");const O=await $();l.value=O,console.log("‚úÖ [DashboardView] Production par semaine charg√©e:",O)}catch(a){console.error("‚ùå [DashboardView] Erreur lors du chargement des donn√©es:",a),u.value="Erreur lors du chargement des donn√©es",c.value={totalArticles:0,totalCommandes:0,totalLivraisons:0,totalProductions:0},v.value=[],m.value=[],h.value=[]}finally{p.value=!1}},E=async()=>{console.log("üîÑ [DashboardView] Rafra√Æchissement des donn√©es..."),await z()},_=a=>({en_attente:"En attente",confirmee:"Confirm√©e",en_preparation:"En pr√©paration",livree:"Livr√©e",annulee:"Annul√©e",en_cours:"En cours",termine:"Termin√©",annule:"Annul√©"})[a]||a,W=a=>({qualite:"Qualit√©",performance:"Performance",cout:"Co√ªt",rendement:"Rendement",autre:"Autre"})[a]||a,k=a=>new Date(a).toLocaleDateString("fr-FR");return os(()=>{console.log("üöÄ [DashboardView] onMounted - D√©but du chargement du dashboard"),console.log("üöÄ [DashboardView] Appel de loadDashboardData()"),z()}),(a,t)=>{const r=as("router-link");return i(),n("div",ls,[s("div",ds,[t[0]||(t[0]=s("strong",null,"Debug Dashboard:",-1)),b(" Composant charg√© - "+e(new Date().toLocaleTimeString()),1)]),s("div",rs,[s("div",cs,[t[3]||(t[3]=s("div",null,[s("h1",{class:"dashboard-title"},"Tableau de bord"),s("p",{class:"dashboard-subtitle"},"Vue d'ensemble de votre activit√©")],-1)),s("div",us,[s("button",{onClick:E,disabled:p.value,class:"refresh-button",title:"Actualiser les donn√©es"},[p.value?(i(),n("svg",hs,[...t[2]||(t[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(i(),n("svg",ms,[...t[1]||(t[1]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])]))],8,vs)])])]),s("div",ps,[s("div",bs,[t[5]||(t[5]=s("div",{class:"stat-icon"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),s("div",gs,[s("div",_s,e(c.value.totalArticles||0),1),t[4]||(t[4]=s("div",{class:"stat-label"},"Articles en stock",-1))])]),s("div",ks,[t[7]||(t[7]=s("div",{class:"stat-icon"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),s("div",ws,[s("div",ys,e(c.value.totalCommandes||0),1),t[6]||(t[6]=s("div",{class:"stat-label"},"Commandes",-1))])]),s("div",Ds,[t[9]||(t[9]=s("div",{class:"stat-icon"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})])],-1)),s("div",Vs,[s("div",Cs,e(c.value.totalLivraisons||0),1),t[8]||(t[8]=s("div",{class:"stat-label"},"Livraisons",-1))])]),s("div",fs,[t[11]||(t[11]=s("div",{class:"stat-icon"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})])],-1)),s("div",xs,[s("div",As,e(c.value.totalProductions||0),1),t[10]||(t[10]=s("div",{class:"stat-label"},"Productions",-1))])])]),s("div",Ss,[s("div",Ls,[t[13]||(t[13]=s("div",{class:"stat-icon text-red-600"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),s("div",Ms,[s("div",js,e(g.value.stockCritique||0),1),t[12]||(t[12]=s("div",{class:"stat-label text-red-700"},"Stock Critique",-1))])]),s("div",Is,[t[15]||(t[15]=s("div",{class:"stat-icon text-green-600"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),s("div",Ps,[s("div",Js,e((g.value.valeurTotale||0).toLocaleString())+" FCFA",1),t[14]||(t[14]=s("div",{class:"stat-label text-green-700"},"Valeur Stock",-1))])]),s("div",Ts,[t[17]||(t[17]=s("div",{class:"stat-icon text-blue-600"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),s("div",Bs,[s("div",zs,e(I.value.total||0),1),t[16]||(t[16]=s("div",{class:"stat-label text-blue-700"},"Productions Aujourd'hui",-1))])]),s("div",Es,[t[19]||(t[19]=s("div",{class:"stat-icon text-purple-600"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),s("div",Ns,[s("div",Hs,e(P.value.total||0),1),t[18]||(t[18]=s("div",{class:"stat-label text-purple-700"},"Livraisons R√©centes",-1))])]),s("div",Rs,[t[21]||(t[21]=s("div",{class:"stat-icon text-orange-600"},[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),s("div",Fs,[s("div",Xs,e(l.value.totalSemaine||0),1),t[20]||(t[20]=s("div",{class:"stat-label text-orange-700"},"Production Semaine",-1))])])]),l.value.parJour?(i(),n("div",Os,[t[29]||(t[29]=s("h2",{class:"section-title"},"Production par jour de la semaine",-1)),s("div",qs,[s("div",Gs,[t[22]||(t[22]=s("div",{class:"day-name"},"Lundi",-1)),s("div",Qs,e(l.value.parJour.lundi||0),1)]),s("div",Us,[t[23]||(t[23]=s("div",{class:"day-name"},"Mardi",-1)),s("div",Zs,e(l.value.parJour.mardi||0),1)]),s("div",$s,[t[24]||(t[24]=s("div",{class:"day-name"},"Mercredi",-1)),s("div",Ws,e(l.value.parJour.mercredi||0),1)]),s("div",Ys,[t[25]||(t[25]=s("div",{class:"day-name"},"Jeudi",-1)),s("div",Ks,e(l.value.parJour.jeudi||0),1)]),s("div",st,[t[26]||(t[26]=s("div",{class:"day-name"},"Vendredi",-1)),s("div",tt,e(l.value.parJour.vendredi||0),1)]),s("div",et,[t[27]||(t[27]=s("div",{class:"day-name"},"Samedi",-1)),s("div",ot,e(l.value.parJour.samedi||0),1)]),s("div",at,[t[28]||(t[28]=s("div",{class:"day-name"},"Dimanche",-1)),s("div",nt,e(l.value.parJour.dimanche||0),1)])])])):D("",!0),u.value?(i(),n("div",it,[t[30]||(t[30]=s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("span",null,e(u.value),1),s("button",{onClick:E,class:"retry-button"},"R√©essayer")])):D("",!0),u.value?D("",!0):(i(),n("div",lt,[s("div",dt,[s("div",rt,[t[32]||(t[32]=s("h2",{class:"section-title"},"Commandes r√©centes",-1)),V(r,{to:"/commandes",class:"section-link"},{default:C(()=>[...t[31]||(t[31]=[b("Voir toutes",-1)])]),_:1})]),s("div",ct,[J.value.length===0?(i(),n("div",ut,[...t[33]||(t[33]=[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),s("p",null,"Aucune commande r√©cente",-1)])])):(i(),n("div",vt,[(i(!0),n(f,null,x(J.value,o=>(i(),n("div",{key:o.id,class:"commande-item"},[s("div",mt,[s("div",ht,e(o.numeroCommande),1),s("div",pt,e(o.client),1)]),s("div",bt,[s("span",{class:A(`statut-badge statut-${o.statut}`)},e(_(o.statut)),3),s("div",gt,e(k(o.date)),1)])]))),128))]))])]),s("div",_t,[s("div",kt,[t[35]||(t[35]=s("h2",{class:"section-title"},"Livraisons en cours",-1)),V(r,{to:"/livraisons",class:"section-link"},{default:C(()=>[...t[34]||(t[34]=[b("Voir toutes",-1)])]),_:1})]),s("div",wt,[T.value.length===0?(i(),n("div",yt,[...t[36]||(t[36]=[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1),s("p",null,"Aucune livraison en cours",-1)])])):(i(),n("div",Dt,[(i(!0),n(f,null,x(T.value,o=>(i(),n("div",{key:o.id,class:"livraison-item"},[s("div",Vt,[s("div",Ct,e(o.numeroBl),1),s("div",ft,e(o.client),1)]),s("div",xt,[s("span",{class:A(`statut-badge statut-${o.statut}`)},e(_(o.statut)),3),s("div",At,e(k(o.date)),1)])]))),128))]))])]),s("div",St,[s("div",Lt,[t[38]||(t[38]=s("h2",{class:"section-title"},"Analyses r√©centes",-1)),V(r,{to:"/analyses",class:"section-link"},{default:C(()=>[...t[37]||(t[37]=[b("Voir toutes",-1)])]),_:1})]),s("div",Mt,[B.value.length===0?(i(),n("div",jt,[...t[39]||(t[39]=[s("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),s("p",null,"Aucune analyse r√©cente",-1)])])):(i(),n("div",It,[(i(!0),n(f,null,x(B.value,o=>(i(),n("div",{key:o.id,class:"analyse-item"},[s("div",Pt,[s("div",Jt,e(o.nom),1),s("div",Tt,e(W(o.type)),1)]),s("div",Bt,[s("span",{class:A(`statut-badge statut-${o.statut}`)},e(_(o.statut)),3),s("div",zt,e(k(o.dateDebut)),1)])]))),128))]))])])]))])}}}),Rt=is(Et,[["__scopeId","data-v-a212051c"]]);export{Rt as default};
