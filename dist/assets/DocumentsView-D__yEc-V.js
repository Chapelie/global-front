import{d as T,x as k,r as m,p as _,y as L,c as r,a as s,j as a,b as n,E as u,f as M,t as i,D as S,I as N,g as w,v as $,q as z,i as E,F as A,z as F,h,N as j,O as G,o as v,A as I}from"./index-D0gnmK0b.js";import{r as R}from"./TrashIcon-CaummfL_.js";const U={class:"documents-container"},q={class:"documents-header"},H={class:"header-content"},K={class:"header-main"},O={class:"flex items-center"},J={class:"h-12 w-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center mr-4 shadow-lg"},P={class:"main-content"},Q={class:"stats-grid"},W={class:"stat-card"},X={class:"stat-content"},Y={class:"stat-icon-wrapper stat-blue"},Z={class:"stat-details"},ss={class:"stat-value"},ts={class:"stat-card"},es={class:"stat-content"},os={class:"stat-icon-wrapper stat-green"},as={class:"stat-details"},ns={class:"stat-value"},is={class:"stat-card"},ls={class:"stat-content"},ds={class:"stat-icon-wrapper stat-purple"},cs={class:"stat-details"},rs={class:"stat-value"},us={class:"filters-section"},vs={class:"filters-grid"},ps={class:"filter-group"},ms={class:"filter-group"},_s={class:"documents-grid"},hs={class:"document-header"},fs={class:"document-icon-wrapper"},gs={class:"document-info"},bs={class:"document-title"},ws={class:"document-description"},ys={class:"document-meta"},Ds={class:"document-type"},Vs={class:"document-size"},Bs={class:"document-actions"},xs=["href"],Cs=["href"],Ts=["onClick"],ks={key:0,class:"empty-state"},Ls={class:"empty-icon-wrapper"},Ms=T({__name:"DocumentsView",setup(Ss){const{getDocuments:y,deleteDocument:D}=k(),l=m([]),d=m(""),c=m(""),V=_(()=>l.value.filter(e=>e.type==="bon_livraison")),B=_(()=>l.value.reduce((e,t)=>e+t.taille,0)),f=_(()=>l.value.filter(e=>{const t=e.nom.toLowerCase().includes(d.value.toLowerCase())||e.description?.toLowerCase().includes(d.value.toLowerCase()),o=!c.value||e.type===c.value;return t&&o})),g=async()=>{try{console.log("üîç [DocumentsView] Chargement des documents..."),l.value=await y(),console.log("‚úÖ [DocumentsView] Documents charg√©s:",l.value.length)}catch(e){console.error("‚ùå [DocumentsView] Erreur lors du chargement des documents:",e)}},x=async e=>{if(confirm("√ätes-vous s√ªr de vouloir supprimer ce document ?"))try{console.log("üóëÔ∏è [DocumentsView] Suppression du document:",e),await D(e),await g(),console.log("‚úÖ [DocumentsView] Document supprim√©")}catch(t){console.error("‚ùå [DocumentsView] Erreur lors de la suppression:",t)}},C=e=>({bon_livraison:"Bon de livraison",facture:"Facture",devis:"Devis",autre:"Autre"})[e]||e,b=e=>{if(e===0)return"0 B";const t=1024,o=["B","KB","MB","GB"],p=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,p)*100)/100+" "+o[p]};return L(()=>{g()}),(e,t)=>(v(),r("div",U,[s("div",q,[s("div",H,[s("div",K,[s("div",O,[s("div",J,[a(n(u),{class:"h-6 w-6 text-white"})]),t[2]||(t[2]=s("div",null,[s("h1",{class:"page-title"},"Documents"),s("p",{class:"page-subtitle"},"Gestion de vos bons de livraison et documents")],-1))])])])]),s("div",P,[s("div",Q,[s("div",W,[s("div",X,[s("div",Y,[a(n(u),{class:"stat-icon"})]),s("div",Z,[t[3]||(t[3]=s("dt",{class:"stat-label"},"Total documents",-1)),s("dd",ss,i(l.value.length),1),t[4]||(t[4]=s("dd",{class:"stat-unit"},"documents",-1))])])]),s("div",ts,[s("div",es,[s("div",os,[a(n(S),{class:"stat-icon"})]),s("div",as,[t[5]||(t[5]=s("dt",{class:"stat-label"},"Bons de livraison",-1)),s("dd",ns,i(V.value.length),1),t[6]||(t[6]=s("dd",{class:"stat-unit"},"BL",-1))])])]),s("div",is,[s("div",ls,[s("div",ds,[a(n(N),{class:"stat-icon"})]),s("div",cs,[t[7]||(t[7]=s("dt",{class:"stat-label"},"Espace utilis√©",-1)),s("dd",rs,i(b(B.value)),1),t[8]||(t[8]=s("dd",{class:"stat-unit"},"stockage",-1))])])])]),s("div",us,[s("div",vs,[s("div",ps,[t[9]||(t[9]=s("label",{class:"filter-label"},"Recherche",-1)),w(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),type:"text",placeholder:"Rechercher un document...",class:"filter-input"},null,512),[[$,d.value]])]),s("div",ms,[t[11]||(t[11]=s("label",{class:"filter-label"},"Type",-1)),w(s("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>c.value=o),class:"filter-select"},[...t[10]||(t[10]=[E('<option value="" data-v-a83d1b40>Tous les types</option><option value="bon_livraison" data-v-a83d1b40>Bon de livraison</option><option value="facture" data-v-a83d1b40>Facture</option><option value="devis" data-v-a83d1b40>Devis</option><option value="autre" data-v-a83d1b40>Autre</option>',5)])],512),[[z,c.value]])])])]),s("div",_s,[(v(!0),r(A,null,F(f.value,o=>(v(),r("div",{key:o.id,class:"document-card"},[s("div",hs,[s("div",fs,[a(n(u),{class:"document-icon"})]),s("div",gs,[s("h3",bs,i(o.nom),1),s("p",ws,i(o.description),1)])]),s("div",ys,[s("span",Ds,i(C(o.type)),1),s("span",Vs,i(b(o.taille)),1)]),s("div",Bs,[s("a",{href:o.url,target:"_blank",class:"action-button action-primary"},[a(n(j),{class:"h-4 w-4 mr-2"}),t[12]||(t[12]=h(" Voir ",-1))],8,xs),s("a",{href:o.url,download:"",class:"action-button action-secondary"},[a(n(G),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=h(" T√©l√©charger ",-1))],8,Cs),s("button",{onClick:p=>x(o.id),class:"action-button action-danger"},[a(n(R),{class:"h-4 w-4 mr-2"}),t[14]||(t[14]=h(" Supprimer ",-1))],8,Ts)])]))),128))]),f.value.length===0?(v(),r("div",ks,[s("div",Ls,[a(n(u),{class:"empty-icon"})]),t[15]||(t[15]=s("h3",{class:"empty-title"},"Aucun document",-1)),t[16]||(t[16]=s("p",{class:"empty-subtitle"},"Les documents g√©n√©r√©s appara√Ætront ici",-1))])):M("",!0)])]))}}),zs=I(Ms,[["__scopeId","data-v-a83d1b40"]]);export{zs as default};
