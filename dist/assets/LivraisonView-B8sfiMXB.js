const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/html2pdf-YO-wVg5_.js","assets/index-DShiURXh.js","assets/index-Cq29hK3H.css"])))=>i.map(i=>d[i]);
import{d as J,r as b,h as Z,C as se,c as l,b as e,e as _,t as n,f as x,v as j,x as B,o as a,D as K,i as V,a as Q,F as T,q as P,g as D,j as ee,s as E,E as te,_ as oe,y as ne,w as ie}from"./index-DShiURXh.js";const ae={class:"signature-pad-container"},le={class:"signature-header"},re={class:"signature-title"},de={class:"signature-description"},ue={class:"signature-canvas-container"},ce=["width","height"],ve={class:"signature-controls"},pe={class:"controls-row"},me={class:"control-item"},fe={class:"control-item"},be={class:"button-group"},he=["disabled"],ge=["disabled"],_e={key:0,class:"signature-preview"},ke=["src"],ye=J({__name:"SignaturePad",props:{title:{default:"Signature électronique"},description:{default:"Signez dans la zone ci-dessous en utilisant votre souris ou votre doigt"},canvasWidth:{default:400},canvasHeight:{default:200},required:{type:Boolean,default:!0}},emits:["signature","clear"],setup(H,{emit:$}){const y=H,C=$,k=b(),c=b(),v=b(!1),q=b(0),w=b(0),m=b("#000000"),L=b(3),r=b(""),o=b([]),u=b(!1),h=b(!1);Z(()=>{k.value&&(c.value=k.value.getContext("2d"),S())});const S=()=>{c.value&&(c.value.fillStyle="#ffffff",c.value.fillRect(0,0,y.canvasWidth,y.canvasHeight),c.value.strokeStyle=m.value,c.value.lineWidth=L.value,c.value.lineCap="round",c.value.lineJoin="round")},U=g=>{v.value=!0;const f=k.value.getBoundingClientRect();q.value=g.clientX-f.left,w.value=g.clientY-f.top},z=g=>{if(!v.value||!c.value)return;const f=k.value.getBoundingClientRect(),d=g.clientX-f.left,s=g.clientY-f.top;c.value.beginPath(),c.value.moveTo(q.value,w.value),c.value.lineTo(d,s),c.value.stroke(),q.value=d,w.value=s},A=()=>{v.value&&(v.value=!1,O(),h.value=!0)},I=g=>{g.preventDefault();const f=g.touches[0],d=k.value.getBoundingClientRect();q.value=f.clientX-d.left,w.value=f.clientY-d.top,v.value=!0},N=g=>{if(g.preventDefault(),!v.value||!c.value)return;const f=g.touches[0],d=k.value.getBoundingClientRect(),s=f.clientX-d.left,t=f.clientY-d.top;c.value.beginPath(),c.value.moveTo(q.value,w.value),c.value.lineTo(s,t),c.value.stroke(),q.value=s,w.value=t},O=()=>{if(k.value){const g=k.value.toDataURL();o.value.push(g),u.value=o.value.length>0}},W=()=>{o.value.length>0&&(o.value.pop(),o.value.length>0?F(o.value[o.value.length-1]):(S(),h.value=!1),u.value=o.value.length>0)},F=g=>{const f=new Image;f.onload=()=>{c.value&&k.value&&(c.value.clearRect(0,0,y.canvasWidth,y.canvasHeight),c.value.drawImage(f,0,0))},f.src=g},Y=()=>{c.value&&(c.value.clearRect(0,0,y.canvasWidth,y.canvasHeight),S(),o.value=[],u.value=!1,h.value=!1,r.value="",C("clear"))},X=()=>{k.value&&h.value&&(r.value=k.value.toDataURL("image/png"),C("signature",r.value))};return se([m,L],()=>{c.value&&(c.value.strokeStyle=m.value,c.value.lineWidth=L.value)}),(g,f)=>(a(),l("div",ae,[e("div",le,[e("h3",re,n(g.title),1),e("p",de,n(g.description),1)]),e("div",ue,[e("canvas",{ref_key:"canvasRef",ref:k,width:g.canvasWidth,height:g.canvasHeight,class:"signature-canvas",onMousedown:U,onMousemove:z,onMouseup:A,onMouseleave:A,onTouchstart:I,onTouchmove:N,onTouchend:A},null,40,ce)]),e("div",ve,[e("div",pe,[e("label",me,[x(e("input",{type:"color","onUpdate:modelValue":f[0]||(f[0]=d=>m.value=d),class:"color-input"},null,512),[[j,m.value]]),f[2]||(f[2]=e("span",{class:"control-label"},"Couleur",-1))]),e("label",fe,[x(e("input",{type:"range","onUpdate:modelValue":f[1]||(f[1]=d=>L.value=d),min:"1",max:"10",class:"range-input"},null,512),[[j,L.value]]),f[3]||(f[3]=e("span",{class:"control-label"},"Épaisseur",-1))])]),e("div",be,[e("button",{onClick:Y,class:"btn btn-secondary"}," Effacer "),e("button",{onClick:W,disabled:!u.value,class:B(["btn btn-primary",{"btn-disabled":!u.value}])}," Annuler ",10,he),e("button",{onClick:X,disabled:!h.value,class:B(["btn btn-success",{"btn-disabled":!h.value}])}," Valider la signature ",10,ge)])]),r.value?(a(),l("div",_e,[f[4]||(f[4]=e("h4",{class:"preview-title"},"Aperçu de la signature :",-1)),e("img",{src:r.value,alt:"Signature",class:"preview-image"},null,8,ke)])):_("",!0)]))}}),$e=K(ye,[["__scopeId","data-v-53050372"]]),we={key:0,class:"modal-overlay"},Ce={class:"modal-container"},Le={class:"modal-header"},Be={class:"header-content"},qe={class:"header-left"},De={class:"bl-number"},Me={class:"steps-indicator"},Se={class:"step-item"},Re={class:"step-item"},xe={class:"step-item"},je={class:"step-item"},Te={class:"modal-body"},Pe={key:0},Ve={class:"details-grid"},Ae={class:"info-card"},Ue={class:"info-list"},Ie={class:"info-item"},Ee={class:"info-value"},He={class:"info-item"},ze={class:"info-value"},Fe={class:"info-item"},Ne={class:"info-value"},Oe={class:"info-card"},We={class:"info-list"},Ye={class:"info-item"},Xe={class:"info-value"},Ge={class:"info-item"},Qe={class:"info-value"},Je={class:"info-item"},Ke={class:"info-value"},Ze={class:"produits-section"},es={class:"produits-table"},ss={class:"table-body"},ts={class:"table-cell"},os={class:"table-cell"},ns={class:"table-cell"},is=["onUpdate:modelValue","max","onInput"],as={class:"unite-text"},ls={class:"table-cell"},rs={class:"table-cell"},ds={key:1,class:"difference-zero"},us={key:1},cs={class:"signature-step"},vs={class:"step-actions"},ps=["disabled"],ms={key:2},fs={class:"preuves-step"},bs={class:"preuve-section"},hs={class:"media-upload"},gs={key:0,class:"media-preview"},_s={class:"preview-title"},ks={class:"media-grid"},ys=["src","alt"],$s=["src"],ws={class:"media-overlay"},Cs=["onClick"],Ls={class:"preuve-section"},Bs={class:"media-upload"},qs={key:0,class:"media-preview"},Ds={class:"preview-title"},Ms={class:"media-grid"},Ss=["src","alt"],Rs=["src"],xs={class:"media-overlay"},js=["onClick"],Ts={class:"observations-section"},Ps={key:3},Vs={class:"confirmation-step"},As={class:"delivery-summary"},Us={class:"summary-grid"},Is={class:"summary-item"},Es={class:"summary-value"},Hs={class:"summary-item"},zs={class:"summary-value"},Fs={class:"summary-item"},Ns={class:"summary-value"},Os={class:"summary-item"},Ws={class:"summary-value"},Ys=J({__name:"LivraisonAvecSignature",props:{livraison:{},showModal:{type:Boolean}},emits:["close","save"],setup(H,{emit:$}){const y=H,C=$;b(""),b("");const k=b(""),c=b(""),v=b("details"),q=b(),w=b(),m=b([]),L=b([]),r=V(()=>new Date().toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})),o=V(()=>new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}));V(()=>y.livraison.produits.some(d=>(d.quantiteLivree||d.quantite||0)>0)),V(()=>y.livraison.produits.some(d=>{const s=d.quantiteCommandee||d.quantite||0,t=d.quantiteLivree||0;return s!==t}));const u=()=>{v.value==="details"?v.value="signature":v.value==="signature"?v.value="preuves":v.value==="preuves"&&(v.value="confirmation")},h=()=>{v.value==="signature"?v.value="details":v.value==="preuves"?v.value="signature":v.value==="confirmation"&&(v.value="preuves")},S=async()=>{const d=new Date,s=d.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),t=d.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),i=await Promise.all(m.value.map(async R=>{const G=await U(R.file);return`${R.name}|${R.type}|${G}`})),p=await Promise.all(L.value.map(async R=>{const G=await U(R.file);return`${R.name}|${R.type}|${G}`})),M={...y.livraison,statut:"livre",preuveDepot:i.join(";;"),preuveReception:p.join(";;"),signatureClient:k.value,observations:c.value,heureLivraison:t,dateLivraison:s,produits:y.livraison.produits.map((R,G)=>({...R,quantiteLivree:R.quantiteLivree||0,difference:R.difference||0}))};E.mettreAJourEtatCommandeApresLivraison(M),C("save",M),C("close")},U=d=>new Promise((s,t)=>{const i=new FileReader;i.readAsDataURL(d),i.onload=()=>{typeof i.result=="string"?s(i.result):t(new Error("Erreur lors de la conversion du fichier"))},i.onerror=p=>t(p)}),z=d=>{const s=y.livraison.produits[d],t=s.quantiteCommandee||s.quantite||0,i=s.quantiteLivree||0;s.difference=t-i},A=()=>{S()},I=b(""),N=d=>{I.value=d,k.value=d,v.value="preuves"},O=()=>{q.value?.click()},W=()=>{w.value?.click()},F=d=>{const s=d.target;s.files&&Array.from(s.files).forEach(t=>{const i=URL.createObjectURL(t),p=t.type.startsWith("image/")?"image":"video";m.value.push({file:t,url:i,name:t.name,type:p})})},Y=d=>{const s=d.target;s.files&&Array.from(s.files).forEach(t=>{const i=URL.createObjectURL(t),p=t.type.startsWith("image/")?"image":"video";L.value.push({file:t,url:i,name:t.name,type:p})})},X=d=>{const s=m.value[d];URL.revokeObjectURL(s.url),m.value.splice(d,1)},g=d=>{const s=L.value[d];URL.revokeObjectURL(s.url),L.value.splice(d,1)},f=()=>{C("close")};return(d,s)=>d.showModal?(a(),l("div",we,[e("div",Ce,[e("div",Le,[e("div",Be,[e("div",qe,[s[2]||(s[2]=e("div",{class:"bl-icon"},[e("span",{class:"bl-text"},"B")],-1)),e("div",null,[s[1]||(s[1]=e("h2",{class:"modal-title"},"Livraison avec Signature",-1)),e("p",De,n(d.livraison.numeroBL),1)])]),e("button",{onClick:f,class:"close-button"},[...s[3]||(s[3]=[e("svg",{class:"close-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Me,[e("div",Se,[e("div",{class:B(["step-number",v.value==="details"?"step-active":"step-inactive"])}," 1 ",2),e("span",{class:B(["step-label",v.value==="details"?"step-label-active":"step-label-inactive"])}," Détails ",2)]),s[4]||(s[4]=e("div",{class:"step-connector"},null,-1)),e("div",Re,[e("div",{class:B(["step-number",v.value==="signature"?"step-active":"step-inactive"])}," 2 ",2),e("span",{class:B(["step-label",v.value==="signature"?"step-label-active":"step-label-inactive"])}," Signature ",2)]),s[5]||(s[5]=e("div",{class:"step-connector"},null,-1)),e("div",xe,[e("div",{class:B(["step-number",v.value==="preuves"?"step-active":"step-inactive"])}," 3 ",2),e("span",{class:B(["step-label",v.value==="preuves"?"step-label-active":"step-label-inactive"])}," Preuves ",2)]),s[6]||(s[6]=e("div",{class:"step-connector"},null,-1)),e("div",je,[e("div",{class:B(["step-number",v.value==="confirmation"?"step-active":"step-inactive"])}," 4 ",2),e("span",{class:B(["step-label",v.value==="confirmation"?"step-label-active":"step-label-inactive"])}," Confirmation ",2)])])]),e("div",Te,[v.value==="details"?(a(),l("div",Pe,[e("div",Ve,[e("div",Ae,[s[10]||(s[10]=e("h3",{class:"info-title"},"Informations client",-1)),e("div",Ue,[e("div",Ie,[s[7]||(s[7]=e("span",{class:"info-label"},"Client:",-1)),e("p",Ee,n(d.livraison.client),1)]),e("div",He,[s[8]||(s[8]=e("span",{class:"info-label"},"Téléphone:",-1)),e("p",ze,n(d.livraison.telephone),1)]),e("div",Fe,[s[9]||(s[9]=e("span",{class:"info-label"},"Adresse:",-1)),e("p",Ne,n(d.livraison.adresse),1)])])]),e("div",Oe,[s[14]||(s[14]=e("h3",{class:"info-title"},"Informations livraison",-1)),e("div",We,[e("div",Ye,[s[11]||(s[11]=e("span",{class:"info-label"},"Chauffeur:",-1)),e("p",Xe,n(d.livraison.chauffeur),1)]),e("div",Ge,[s[12]||(s[12]=e("span",{class:"info-label"},"Date:",-1)),e("p",Qe,n(r.value),1)]),e("div",Je,[s[13]||(s[13]=e("span",{class:"info-label"},"Heure de livraison:",-1)),e("span",Ke,n(o.value),1)])])])]),e("div",Ze,[s[16]||(s[16]=e("h3",{class:"section-title"},"Produits à livrer",-1)),e("div",es,[s[15]||(s[15]=Q('<div class="table-header" data-v-919b052b><div class="header-cell" data-v-919b052b>Produit</div><div class="header-cell" data-v-919b052b>Commandé</div><div class="header-cell" data-v-919b052b>À livrer</div><div class="header-cell" data-v-919b052b>Livré</div><div class="header-cell" data-v-919b052b>Différence</div></div>',1)),e("div",ss,[(a(!0),l(T,null,P(d.livraison.produits,(t,i)=>(a(),l("div",{key:i,class:"table-row"},[e("div",ts,n(t.nom),1),e("div",os,n(t.quantiteCommandee||t.quantite)+" "+n(t.unite),1),e("div",ns,[x(e("input",{"onUpdate:modelValue":p=>t.quantiteLivree=p,type:"number",min:"0",max:t.quantiteCommandee||t.quantite,class:"quantity-input",onInput:p=>z(i)},null,40,is),[[j,t.quantiteLivree,void 0,{number:!0}]]),e("span",as,n(t.unite),1)]),e("div",ls,n(t.quantiteLivree||0)+" "+n(t.unite),1),e("div",rs,[t.difference!==0?(a(),l("span",{key:0,class:B(["difference-badge",t.difference>0?"difference-positive":"difference-negative"])},n(t.difference>0?"+":"")+n(t.difference),3)):(a(),l("span",ds,"0"))])]))),128))])])]),e("div",{class:"step-actions"},[e("button",{onClick:u,class:"btn btn-primary"},[...s[17]||(s[17]=[D(" Continuer ",-1),e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])])):_("",!0),v.value==="signature"?(a(),l("div",us,[e("div",cs,[s[18]||(s[18]=e("h3",{class:"section-title"},"Signature du client",-1)),s[19]||(s[19]=e("p",{class:"section-description"},"Demandez au client de signer ci-dessous pour confirmer la réception",-1)),ee($e,{title:"Signature du client",description:"Veuillez signer dans la zone ci-dessous",required:!0,onSignature:N})]),e("div",vs,[e("button",{onClick:h,class:"btn btn-secondary"},[...s[20]||(s[20]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),D(" Retour ",-1)])]),e("button",{onClick:u,disabled:!I.value,class:B(["btn btn-primary",{"btn-disabled":!I.value}])},[...s[21]||(s[21]=[D(" Continuer ",-1),e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,ps)])])):_("",!0),v.value==="preuves"?(a(),l("div",ms,[e("div",fs,[s[31]||(s[31]=e("h3",{class:"section-title"},"Preuves de livraison",-1)),s[32]||(s[32]=e("p",{class:"section-description"},"Ajoutez des photos ou vidéos pour documenter la livraison",-1)),e("div",bs,[s[24]||(s[24]=e("h4",{class:"preuve-title"},"📸 Preuve de dépôt",-1)),s[25]||(s[25]=e("p",{class:"preuve-description"},"Photo/vidéo des produits déposés et de l'état général",-1)),e("div",hs,[e("input",{ref_key:"depotFileInput",ref:q,type:"file",accept:"image/*,video/*",multiple:"",class:"file-input",onChange:F},null,544),e("button",{onClick:O,class:"upload-btn"},[...s[22]||(s[22]=[e("svg",{class:"upload-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),D(" Ajouter des médias ",-1)])])]),m.value.length>0?(a(),l("div",gs,[e("h5",_s,"Médias ajoutés ("+n(m.value.length)+")",1),e("div",ks,[(a(!0),l(T,null,P(m.value,(t,i)=>(a(),l("div",{key:i,class:"media-item"},[t.type==="image"?(a(),l("img",{key:0,src:t.url,alt:t.name,class:"media-thumbnail"},null,8,ys)):t.type==="video"?(a(),l("video",{key:1,src:t.url,class:"media-thumbnail",controls:""},null,8,$s)):_("",!0),e("div",ws,[e("button",{onClick:p=>X(i),class:"remove-media-btn"},[...s[23]||(s[23]=[e("svg",{class:"remove-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Cs)])]))),128))])])):_("",!0)]),e("div",Ls,[s[28]||(s[28]=e("h4",{class:"preuve-title"},"✅ Preuve de réception",-1)),s[29]||(s[29]=e("p",{class:"preuve-description"},"Photo/vidéo de la réception par le client",-1)),e("div",Bs,[e("input",{ref_key:"receptionFileInput",ref:w,type:"file",accept:"image/*,video/*",multiple:"",class:"file-input",onChange:Y},null,544),e("button",{onClick:W,class:"upload-btn"},[...s[26]||(s[26]=[e("svg",{class:"upload-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),D(" Ajouter des médias ",-1)])])]),L.value.length>0?(a(),l("div",qs,[e("h5",Ds,"Médias ajoutés ("+n(L.value.length)+")",1),e("div",Ms,[(a(!0),l(T,null,P(L.value,(t,i)=>(a(),l("div",{key:i,class:"media-item"},[t.type==="image"?(a(),l("img",{key:0,src:t.url,alt:t.name,class:"media-thumbnail"},null,8,Ss)):t.type==="video"?(a(),l("video",{key:1,src:t.url,class:"media-thumbnail",controls:""},null,8,Rs)):_("",!0),e("div",xs,[e("button",{onClick:p=>g(i),class:"remove-media-btn"},[...s[27]||(s[27]=[e("svg",{class:"remove-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L 6M6 6l12 12"})],-1)])],8,js)])]))),128))])])):_("",!0)]),e("div",Ts,[s[30]||(s[30]=e("h4",{class:"preuve-title"},"📝 Observations",-1)),x(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),placeholder:"Observations supplémentaires sur la livraison...",rows:"3",class:"observations-input"},null,512),[[j,c.value]])])]),e("div",{class:"step-actions"},[e("button",{onClick:h,class:"btn btn-secondary"},[...s[33]||(s[33]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),D(" Retour ",-1)])]),e("button",{onClick:u,class:"btn btn-primary"},[...s[34]||(s[34]=[D(" Continuer ",-1),e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])])):_("",!0),v.value==="confirmation"?(a(),l("div",Ps,[e("div",Vs,[s[40]||(s[40]=Q('<div class="success-icon" data-v-919b052b><svg class="check-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-919b052b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-919b052b></path></svg></div><h3 class="confirmation-title" data-v-919b052b>Livraison terminée avec succès !</h3><p class="confirmation-description" data-v-919b052b>La livraison a été enregistrée et la signature du client a été sauvegardée.</p>',3)),e("div",As,[s[39]||(s[39]=e("h4",{class:"summary-title"},"Résumé de la livraison",-1)),e("div",Us,[e("div",Is,[s[35]||(s[35]=e("span",{class:"summary-label"},"Client:",-1)),e("span",Es,n(d.livraison.client),1)]),e("div",Hs,[s[36]||(s[36]=e("span",{class:"summary-label"},"Date:",-1)),e("span",zs,n(r.value),1)]),e("div",Fs,[s[37]||(s[37]=e("span",{class:"summary-label"},"Heure:",-1)),e("span",Ns,n(o.value),1)]),e("div",Os,[s[38]||(s[38]=e("span",{class:"summary-label"},"Chauffeur:",-1)),e("span",Ws,n(d.livraison.chauffeur),1)])])])]),e("div",{class:"step-actions"},[e("button",{onClick:h,class:"btn btn-secondary"},[...s[41]||(s[41]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),D(" Retour ",-1)])]),e("button",{onClick:A,class:"btn btn-success"},[...s[42]||(s[42]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),D(" Finaliser la livraison ",-1)])])])])):_("",!0)])])])):_("",!0)}}),Xs=K(Ys,[["__scopeId","data-v-919b052b"]]),Gs={class:"bordereau-viewer"},Qs={class:"viewer-header"},Js={class:"viewer-actions"},Ks={class:"bl-header"},Zs={class:"bl-info"},et={class:"bl-number"},st={class:"bl-date"},tt={class:"info-sections"},ot={class:"info-section"},nt={class:"info-grid"},it={class:"info-item"},at={class:"info-value"},lt={class:"info-item"},rt={class:"info-value"},dt={class:"info-item"},ut={class:"info-value"},ct={class:"info-section"},vt={class:"info-grid"},pt={class:"info-item"},mt={class:"info-value"},ft={class:"info-item"},bt={class:"info-value"},ht={class:"info-item"},gt={class:"info-value"},_t={class:"products-section"},kt={class:"products-table"},yt={class:"table-body"},$t={class:"table-cell"},wt={class:"table-cell"},Ct={class:"table-cell"},Lt={class:"table-cell"},Bt={key:1},qt={class:"table-cell"},Dt={key:0,class:"proofs-section"},Mt={key:0,class:"proof-item"},St={class:"proof-content"},Rt=["src","alt"],xt=["src"],jt={class:"proof-name"},Tt={key:1,class:"proof-item"},Pt={class:"proof-content"},Vt=["src","alt"],At=["src"],Ut={class:"proof-name"},It={key:2,class:"proof-item"},Et={class:"proof-text"},Ht={class:"signatures-section"},zt={class:"signature-item"},Ft={class:"signature-name"},Nt={class:"signature-item"},Ot={class:"signature-name"},Wt={key:0,class:"signature-image"},Yt=["src"],Xt={class:"bl-footer"},Gt=J({__name:"BordereauViewer",props:{livraison:{}},emits:["close"],setup(H,{emit:$}){const y=H,C=b(),k=r=>new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),c=r=>r.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),v=r=>r?r.split(";;").map(o=>{const[u,h,S]=o.split("|");return{name:u,type:h,data:S}}):[],q=async()=>{try{if(!C.value)return;let r;try{const u=await te(()=>import("./html2pdf-YO-wVg5_.js").then(h=>h.h),__vite__mapDeps([0,1,2]));r=u.default||u}catch(u){console.log("Import local échoué, essai avec CDN:",u),await w(),r=window.html2pdf}if(typeof r!="function")throw new Error("html2pdf n'est pas une fonction valide");const o={margin:1,filename:`BL-${y.livraison.numeroBL}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};r().set(o).from(C.value).save()}catch(r){console.error("Erreur lors de la génération du PDF:",r),console.log("Détails de l'erreur:",r),m()}},w=()=>new Promise((r,o)=>{if(window.html2pdf){r();return}const u=document.createElement("script");u.src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",u.onload=()=>r(),u.onerror=()=>o(new Error("Impossible de charger html2pdf depuis CDN")),document.head.appendChild(u)}),m=()=>{if(!C.value)return;const r=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>BL-${y.livraison.numeroBL}</title>
      <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .bordereau-content { max-width: 800px; margin: 0 auto; }
        .bl-header { text-align: center; border-bottom: 2px solid #f97316; padding-bottom: 20px; margin-bottom: 30px; }
        .company-name { font-size: 24px; font-weight: bold; color: #f97316; margin: 10px 0; }
        .bl-title { font-size: 20px; font-weight: bold; margin: 10px 0; }
        .info-sections { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .info-section { margin-bottom: 20px; }
        .section-title { font-weight: bold; color: #374151; margin-bottom: 15px; }
        .info-grid { display: grid; gap: 10px; }
        .info-item { display: flex; justify-content: space-between; }
        .info-label { font-weight: bold; color: #6b7280; }
        .products-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .products-table th, .products-table td { border: 1px solid #d1d5db; padding: 12px; text-align: left; }
        .products-table th { background-color: #f9fafb; font-weight: bold; }
        .signatures-section { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 40px; }
        .signature-item { text-align: center; }
        .signature-line { border-top: 1px solid #000; margin-top: 40px; }
        .bl-footer { margin-top: 40px; text-align: center; font-size: 12px; color: #6b7280; }
        @media print { body { margin: 0; } }
      </style>
    </head>
    <body>
      ${C.value.innerHTML}
    </body>
    </html>
  `,o=new Blob([r],{type:"text/html"}),u=URL.createObjectURL(o),h=document.createElement("a");h.href=u,h.download=`BL-${y.livraison.numeroBL}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u)},L=()=>{window.print()};return(r,o)=>(a(),l("div",Gs,[e("div",Qs,[o[4]||(o[4]=e("h2",{class:"viewer-title"},"Bordereau de Livraison",-1)),e("div",Js,[e("button",{onClick:q,class:"btn btn-primary"},[...o[1]||(o[1]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" Télécharger PDF ",-1)])]),e("button",{onClick:L,class:"btn btn-secondary"},[...o[2]||(o[2]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),D(" Imprimer ",-1)])]),e("button",{onClick:o[0]||(o[0]=u=>r.$emit("close")),class:"btn btn-outline"},[...o[3]||(o[3]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),D(" Fermer ",-1)])])])]),e("div",{class:"bordereau-content",ref_key:"bordereauContent",ref:C},[e("div",Ks,[o[6]||(o[6]=Q('<div class="company-info" data-v-7fa08bcf><div class="company-logo" data-v-7fa08bcf><img src="'+oe+'" alt="Global Star Distribution" class="logo-image" data-v-7fa08bcf></div><div class="company-details" data-v-7fa08bcf><h1 class="company-name" data-v-7fa08bcf>GLOBAL STAR DISTRIBUTION</h1><p class="company-address" data-v-7fa08bcf>123 Rue de la Distribution, 75001 Paris</p><p class="company-contact" data-v-7fa08bcf>Tél: +33 1 23 45 67 89 | Email: contact@globalstar.com</p></div></div>',1)),e("div",Zs,[o[5]||(o[5]=e("h2",{class:"bl-title"},"BORDEREAU DE LIVRAISON",-1)),e("div",et,"N° "+n(r.livraison.numeroBL),1),e("div",st,"Date: "+n(k(r.livraison.dateLivraison||r.livraison.date)),1)])]),e("div",tt,[e("div",ot,[o[10]||(o[10]=e("h3",{class:"section-title"},"Informations Client",-1)),e("div",nt,[e("div",it,[o[7]||(o[7]=e("span",{class:"info-label"},"Client:",-1)),e("span",at,n(r.livraison.client),1)]),e("div",lt,[o[8]||(o[8]=e("span",{class:"info-label"},"Téléphone:",-1)),e("span",rt,n(r.livraison.telephone),1)]),e("div",dt,[o[9]||(o[9]=e("span",{class:"info-label"},"Adresse:",-1)),e("span",ut,n(r.livraison.adresse),1)])])]),e("div",ct,[o[14]||(o[14]=e("h3",{class:"section-title"},"Informations Livraison",-1)),e("div",vt,[e("div",pt,[o[11]||(o[11]=e("span",{class:"info-label"},"Chauffeur:",-1)),e("span",mt,n(r.livraison.chauffeur),1)]),e("div",ft,[o[12]||(o[12]=e("span",{class:"info-label"},"Date de livraison:",-1)),e("span",bt,n(k(r.livraison.dateLivraison||r.livraison.date)),1)]),e("div",ht,[o[13]||(o[13]=e("span",{class:"info-label"},"Heure:",-1)),e("span",gt,n(r.livraison.heureLivraison||"N/A"),1)])])])]),e("div",_t,[o[16]||(o[16]=e("h3",{class:"section-title"},"Produits Livrés",-1)),e("div",kt,[o[15]||(o[15]=Q('<div class="table-header" data-v-7fa08bcf><div class="header-cell" data-v-7fa08bcf>Produit</div><div class="header-cell" data-v-7fa08bcf>Quantité commandée</div><div class="header-cell" data-v-7fa08bcf>Quantité livrée</div><div class="header-cell" data-v-7fa08bcf>Différence</div><div class="header-cell" data-v-7fa08bcf>Unité</div></div>',1)),e("div",yt,[(a(!0),l(T,null,P(r.livraison.produits,(u,h)=>(a(),l("div",{key:h,class:"table-row"},[e("div",$t,n(u.nom),1),e("div",wt,n(u.quantiteCommandee||u.quantite),1),e("div",Ct,n(u.quantiteLivree||0),1),e("div",Lt,[u.difference!==0?(a(),l("span",{key:0,class:B(["difference-badge",u.difference>0?"difference-positive":"difference-negative"])},n(u.difference>0?"+":"")+n(u.difference),3)):(a(),l("span",Bt,"0"))]),e("div",qt,n(u.unite),1)]))),128))])])]),r.livraison.preuveDepot||r.livraison.preuveReception||r.livraison.observations?(a(),l("div",Dt,[o[20]||(o[20]=e("h3",{class:"section-title"},"Preuves et Observations",-1)),r.livraison.preuveDepot?(a(),l("div",Mt,[o[17]||(o[17]=e("h4",{class:"proof-title"},"📸 Preuves de dépôt",-1)),e("div",St,[(a(!0),l(T,null,P(v(r.livraison.preuveDepot),(u,h)=>(a(),l("div",{key:h,class:"proof-media"},[u.type==="image"?(a(),l("img",{key:0,src:u.data,alt:u.name,class:"proof-image"},null,8,Rt)):u.type==="video"?(a(),l("video",{key:1,src:u.data,class:"proof-video",controls:""},null,8,xt)):_("",!0),e("div",jt,n(u.name),1)]))),128))])])):_("",!0),r.livraison.preuveReception?(a(),l("div",Tt,[o[18]||(o[18]=e("h4",{class:"proof-title"},"✅ Preuves de réception",-1)),e("div",Pt,[(a(!0),l(T,null,P(v(r.livraison.preuveReception),(u,h)=>(a(),l("div",{key:h,class:"proof-media"},[u.type==="image"?(a(),l("img",{key:0,src:u.data,alt:u.name,class:"proof-image"},null,8,Vt)):u.type==="video"?(a(),l("video",{key:1,src:u.data,class:"proof-video",controls:""},null,8,At)):_("",!0),e("div",Ut,n(u.name),1)]))),128))])])):_("",!0),r.livraison.observations?(a(),l("div",It,[o[19]||(o[19]=e("h4",{class:"proof-title"},"📝 Observations",-1)),e("p",Et,n(r.livraison.observations),1)])):_("",!0)])):_("",!0),e("div",Ht,[e("div",zt,[o[21]||(o[21]=e("div",{class:"signature-label"},"Signature du chauffeur",-1)),o[22]||(o[22]=e("div",{class:"signature-line"},null,-1)),e("div",Ft,n(r.livraison.chauffeur),1)]),e("div",Nt,[o[23]||(o[23]=e("div",{class:"signature-label"},"Signature du client",-1)),o[24]||(o[24]=e("div",{class:"signature-line"},null,-1)),e("div",Ot,n(r.livraison.client),1),r.livraison.signatureClient?(a(),l("div",Wt,[e("img",{src:r.livraison.signatureClient,alt:"Signature du client"},null,8,Yt)])):_("",!0)])]),e("div",Xt,[e("p",null,"Bordereau généré le "+n(k(new Date))+" à "+n(c(new Date)),1),o[25]||(o[25]=e("p",null,"Global Star Distribution - Tous droits réservés",-1))])],512)]))}}),Qt=K(Gt,[["__scopeId","data-v-7fa08bcf"]]),Jt={class:"livraison-container"},Kt={class:"livraison-header"},Zt={class:"header-content"},eo={class:"header-main"},so={class:"main-content"},to={class:"stats-grid"},oo={class:"stat-card"},no={class:"stat-content"},io={class:"stat-details"},ao={class:"stat-value"},lo={class:"stat-card"},ro={class:"stat-content"},uo={class:"stat-details"},co={class:"stat-value"},vo={class:"stat-card"},po={class:"stat-content"},mo={class:"stat-details"},fo={class:"stat-value"},bo={class:"stat-card"},ho={class:"stat-content"},go={class:"stat-details"},_o={class:"stat-value"},ko={class:"tabs-container"},yo={class:"tabs-header"},$o={class:"tabs-nav"},wo={class:"tabs-content"},Co={key:0},Lo={key:0,class:"empty-state"},Bo={key:1,class:"livraison-list"},qo={class:"livraison-content"},Do={class:"livraison-main"},Mo={class:"livraison-header-info"},So={class:"livraison-number"},Ro={class:"livraison-client"},xo={class:"livraison-details"},jo={class:"detail-item"},To={class:"detail-value"},Po={class:"detail-item"},Vo={class:"detail-value"},Ao={class:"detail-item"},Uo={class:"detail-value"},Io={class:"produits-section"},Eo={class:"produits-list"},Ho={class:"produit-nom"},zo={class:"produit-quantites"},Fo={class:"quantite-commandee"},No={class:"quantite-livree"},Oo={class:"livraison-actions"},Wo=["onClick"],Yo=["onClick"],Xo={key:1},Go={key:0,class:"empty-state"},Qo={key:1,class:"livraison-list"},Jo={class:"livraison-content"},Ko={class:"livraison-main"},Zo={class:"livraison-header-info"},en={class:"livraison-number"},sn={class:"livraison-client"},tn={class:"livraison-details"},on={class:"detail-item"},nn={class:"detail-value"},an={class:"detail-item"},ln={class:"detail-value"},rn={class:"detail-item"},dn={class:"detail-value"},un={class:"produits-section"},cn={class:"produits-list"},vn={class:"produit-nom"},pn={class:"produit-quantites"},mn={class:"quantite-commandee"},fn={class:"quantite-livree"},bn={key:0,class:"difference-badge"},hn={key:0,class:"signature-section"},gn=["src"],_n={class:"livraison-actions"},kn=["onClick"],yn={key:1,class:"modal-overlay"},$n={key:2,class:"modal-overlay"},wn={class:"modal-container"},Cn={class:"modal-header"},Ln={class:"modal-header-content"},Bn={class:"modal-title"},qn={class:"modal-body"},Dn={class:"form-row"},Mn={class:"form-group"},Sn={class:"form-group"},Rn={class:"form-group"},xn={class:"form-group"},jn={class:"form-group"},Tn={class:"produits-form-list"},Pn=["onUpdate:modelValue"],Vn=["onUpdate:modelValue"],An=["onUpdate:modelValue"],Un=["onClick"],In={class:"form-actions"},En={type:"submit",class:"btn btn-primary"},Hn=J({__name:"LivraisonView",setup(H){const $=b([]),y=b(!1),C=b(!1),k=b(!1),c=b(null),v=b(null),q=b(null),w=b("nonTerminees"),m=b({client:"",telephone:"",chauffeur:"Camion de livraison",produits:[{nom:"",quantite:0,unite:"pièces",quantiteCommandee:0,quantiteLivree:0,difference:0,resteAPayer:0}],statut:"en_attente",adresse:"",numeroBL:"",codeSuivi:"",date:new Date().toISOString(),totalCommande:0,totalLivraison:0,differenceTotale:0,resteAPayerTotal:0}),L=V(()=>$.value.length),r=V(()=>$.value.filter(s=>s.statut==="en_attente").length),o=V(()=>$.value.filter(s=>s.statut==="en_cours").length),u=V(()=>$.value.filter(s=>s.statut==="livre").length),h=V(()=>$.value.filter(s=>s.statut!=="livre"&&s.statut!=="annule")),S=V(()=>$.value.filter(s=>s.statut==="livre"||s.statut==="annule")),U=()=>{$.value=E.getLivraisons()},z=s=>{s?(c.value=s,m.value={...s}):(c.value=null,m.value={client:"",telephone:"",chauffeur:"Camion de livraison",produits:[{nom:"",quantite:0,unite:"pièces",quantiteCommandee:0,quantiteLivree:0,difference:0,resteAPayer:0}],statut:"en_attente",adresse:"",numeroBL:"",codeSuivi:"",date:new Date().toISOString(),totalCommande:0,totalLivraison:0,differenceTotale:0,resteAPayerTotal:0}),y.value=!0},A=()=>{y.value=!1,c.value=null},I=()=>{m.value.produits.push({nom:"",quantite:0,unite:"pièces",quantiteCommandee:0,quantiteLivree:0,difference:0,resteAPayer:0})},N=s=>{m.value.produits.splice(s,1)},O=()=>{if(c.value){const s=$.value.findIndex(t=>t.id===c.value.id);s!==-1&&($.value[s]={...c.value,...m.value},E.saveLivraisons($.value))}else{const s=E.addLivraison({...m.value,numeroBL:E.generateNumeroBL(),codeSuivi:E.generateCodeSuivi()});$.value.push(s)}A(),U()},W=s=>{v.value=s,C.value=!0},F=()=>{C.value=!1,v.value=null},Y=s=>{const t=$.value.findIndex(i=>i.id===s.id);t!==-1&&($.value[t]=s,E.saveLivraisons($.value)),F(),U()},X=s=>{q.value=s,k.value=!0},g=()=>{k.value=!1,q.value=null},f=s=>{switch(s){case"en_attente":return"bg-yellow-100 text-yellow-800";case"en_cours":return"bg-blue-100 text-blue-800";case"livre":return"bg-green-100 text-green-800";case"annule":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=s=>{switch(s){case"en_attente":return"En attente";case"en_cours":return"En cours";case"livre":return"Livré";case"annule":return"Annulé";default:return s}};return Z(()=>{U()}),(s,t)=>(a(),l("div",Jt,[e("div",Kt,[e("div",Zt,[e("div",eo,[t[8]||(t[8]=e("div",null,[e("h1",{class:"page-title"},"Gestion des Livraisons")],-1)),e("button",{onClick:t[0]||(t[0]=i=>z()),class:"btn btn-primary"},[...t[7]||(t[7]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),D(" Nouvelle livraison ",-1)])])])])]),e("div",so,[e("div",to,[e("div",oo,[e("div",no,[t[10]||(t[10]=e("div",{class:"stat-icon-wrapper stat-blue"},[e("svg",{class:"stat-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",io,[t[9]||(t[9]=e("dt",{class:"stat-label"},"Total livraisons",-1)),e("dd",ao,n(L.value),1)])])]),e("div",lo,[e("div",ro,[t[12]||(t[12]=e("div",{class:"stat-icon-wrapper stat-yellow"},[e("svg",{class:"stat-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",uo,[t[11]||(t[11]=e("dt",{class:"stat-label"},"En attente",-1)),e("dd",co,n(r.value),1)])])]),e("div",vo,[e("div",po,[t[14]||(t[14]=e("div",{class:"stat-icon-wrapper stat-orange"},[e("svg",{class:"stat-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",mo,[t[13]||(t[13]=e("dt",{class:"stat-label"},"En cours",-1)),e("dd",fo,n(o.value),1)])])]),e("div",bo,[e("div",ho,[t[16]||(t[16]=e("div",{class:"stat-icon-wrapper stat-green"},[e("svg",{class:"stat-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",go,[t[15]||(t[15]=e("dt",{class:"stat-label"},"Livrées",-1)),e("dd",_o,n(u.value),1)])])])]),e("div",ko,[e("div",yo,[e("nav",$o,[e("button",{onClick:t[1]||(t[1]=i=>w.value="nonTerminees"),class:B([w.value==="nonTerminees"?"tab-active":"tab-inactive","tab-button"])}," Livraisons en cours ("+n(h.value.length)+") ",3),e("button",{onClick:t[2]||(t[2]=i=>w.value="terminees"),class:B([w.value==="terminees"?"tab-active":"tab-inactive","tab-button"])}," Livraisons terminées ("+n(S.value.length)+") ",3)])]),e("div",wo,[w.value==="nonTerminees"?(a(),l("div",Co,[t[25]||(t[25]=e("div",{class:"section-header"},[e("h3",{class:"section-title"},"Livraisons à effectuer"),e("p",{class:"section-subtitle"},"Livraisons en attente ou en cours de préparation")],-1)),h.value.length===0?(a(),l("div",Lo,[...t[17]||(t[17]=[e("svg",{class:"empty-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"empty-title"},"Aucune livraison en cours",-1),e("p",{class:"empty-subtitle"},"Toutes les livraisons sont terminées ou annulées.",-1)])])):(a(),l("div",Bo,[(a(!0),l(T,null,P(h.value,i=>(a(),l("div",{key:i.id,class:"livraison-card"},[e("div",qo,[e("div",Do,[e("div",Mo,[e("span",{class:B(["status-badge",f(i.statut)])},n(d(i.statut)),3),e("span",So,"#"+n(i.numeroBL),1)]),e("h4",Ro,n(i.client),1),e("div",xo,[e("div",jo,[t[18]||(t[18]=e("span",{class:"detail-label"},"Téléphone:",-1)),e("p",To,n(i.telephone),1)]),e("div",Po,[t[19]||(t[19]=e("span",{class:"detail-label"},"Adresse:",-1)),e("p",Vo,n(i.adresse),1)]),e("div",Ao,[t[20]||(t[20]=e("span",{class:"detail-label"},"Chauffeur:",-1)),e("p",Uo,n(i.chauffeur),1)])]),e("div",Io,[t[22]||(t[22]=e("h5",{class:"produits-title"},"Produits à livrer",-1)),e("div",Eo,[(a(!0),l(T,null,P(i.produits,(p,M)=>(a(),l("div",{key:M,class:"produit-item"},[e("span",Ho,n(p.nom),1),e("div",zo,[e("span",Fo,n(p.quantiteCommandee||p.quantite)+" "+n(p.unite),1),t[21]||(t[21]=e("span",{class:"quantite-arrow"},"→",-1)),e("span",No,n(p.quantiteLivree||0)+" "+n(p.unite),1)])]))),128))])])]),e("div",Oo,[e("button",{onClick:p=>W(i),class:"btn btn-primary"},[...t[23]||(t[23]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),D(" Commencer la livraison ",-1)])],8,Wo),e("button",{onClick:p=>z(i),class:"btn btn-secondary"},[...t[24]||(t[24]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),D(" Modifier ",-1)])],8,Yo)])])]))),128))]))])):_("",!0),w.value==="terminees"?(a(),l("div",Xo,[t[34]||(t[34]=e("div",{class:"section-header"},[e("h3",{class:"section-title"},"Historique des livraisons"),e("p",{class:"section-subtitle"},"Livraisons terminées ou annulées")],-1)),S.value.length===0?(a(),l("div",Go,[...t[26]||(t[26]=[e("svg",{class:"empty-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"empty-title"},"Aucune livraison terminée",-1),e("p",{class:"empty-subtitle"},"Les livraisons terminées apparaîtront ici.",-1)])])):(a(),l("div",Qo,[(a(!0),l(T,null,P(S.value,i=>(a(),l("div",{key:i.id,class:"livraison-card"},[e("div",Jo,[e("div",Ko,[e("div",Zo,[e("span",{class:B(["status-badge",f(i.statut)])},n(d(i.statut)),3),e("span",en,"#"+n(i.numeroBL),1)]),e("h4",sn,n(i.client),1),e("div",tn,[e("div",on,[t[27]||(t[27]=e("span",{class:"detail-label"},"Date de livraison:",-1)),e("p",nn,n(i.dateLivraison||"N/A"),1)]),e("div",an,[t[28]||(t[28]=e("span",{class:"detail-label"},"Heure:",-1)),e("p",ln,n(i.heureLivraison||"N/A"),1)]),e("div",rn,[t[29]||(t[29]=e("span",{class:"detail-label"},"Chauffeur:",-1)),e("p",dn,n(i.chauffeur),1)])]),e("div",un,[t[31]||(t[31]=e("h5",{class:"produits-title"},"Produits livrés",-1)),e("div",cn,[(a(!0),l(T,null,P(i.produits,(p,M)=>(a(),l("div",{key:M,class:"produit-item"},[e("span",vn,n(p.nom),1),e("div",pn,[e("span",mn,n(p.quantiteCommandee||p.quantite)+" commandé(s) ",1),t[30]||(t[30]=e("span",{class:"quantite-arrow"},"→",-1)),e("span",fn,n(p.quantiteLivree||0)+" livré(s) ",1),p.difference&&p.difference>0?(a(),l("span",bn," -"+n(p.difference),1)):_("",!0)])]))),128))])]),i.signatureClient?(a(),l("div",hn,[t[32]||(t[32]=e("h5",{class:"signature-title"},"✅ Signature enregistrée",-1)),e("img",{src:i.signatureClient,alt:"Signature du client",class:"signature-image"},null,8,gn)])):_("",!0)]),e("div",_n,[e("button",{onClick:p=>X(i),class:"btn btn-secondary"},[...t[33]||(t[33]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" Télécharger BL ",-1)])],8,kn)])])]))),128))]))])):_("",!0)])])]),C.value&&v.value?(a(),ne(Xs,{key:0,livraison:v.value,"show-modal":C.value,onClose:F,onSave:Y},null,8,["livraison","show-modal"])):_("",!0),k.value&&q.value?(a(),l("div",yn,[ee(Qt,{livraison:q.value,onClose:g},null,8,["livraison"])])):_("",!0),y.value?(a(),l("div",$n,[e("div",wn,[e("div",Cn,[e("div",Ln,[e("h2",Bn,n(c.value?"Modifier la livraison":"Nouvelle livraison"),1),e("button",{onClick:A,class:"modal-close"},[...t[35]||(t[35]=[e("svg",{class:"modal-close-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",qn,[e("form",{onSubmit:ie(O,["prevent"]),class:"form"},[e("div",Dn,[e("div",Mn,[t[36]||(t[36]=e("label",{class:"form-label"},"Client",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>m.value.client=i),type:"text",required:"",class:"form-input"},null,512),[[j,m.value.client]])]),e("div",Sn,[t[37]||(t[37]=e("label",{class:"form-label"},"Téléphone",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>m.value.telephone=i),type:"tel",required:"",class:"form-input"},null,512),[[j,m.value.telephone]])])]),e("div",Rn,[t[38]||(t[38]=e("label",{class:"form-label"},"Adresse",-1)),x(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=i=>m.value.adresse=i),rows:"3",required:"",class:"form-textarea"},null,512),[[j,m.value.adresse]])]),e("div",xn,[t[39]||(t[39]=e("label",{class:"form-label"},"Chauffeur",-1)),x(e("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>m.value.chauffeur=i),type:"text",required:"",class:"form-input"},null,512),[[j,m.value.chauffeur]])]),e("div",jn,[e("div",{class:"produits-header"},[t[40]||(t[40]=e("label",{class:"form-label"},"Produits",-1)),e("button",{type:"button",onClick:I,class:"add-produit-btn"}," + Ajouter un produit ")]),e("div",Tn,[(a(!0),l(T,null,P(m.value.produits,(i,p)=>(a(),l("div",{key:p,class:"produit-form-row"},[x(e("input",{"onUpdate:modelValue":M=>i.nom=M,type:"text",placeholder:"Nom du produit",required:"",class:"form-input"},null,8,Pn),[[j,i.nom]]),x(e("input",{"onUpdate:modelValue":M=>i.quantite=M,type:"number",placeholder:"Quantité",min:"0",required:"",class:"form-input"},null,8,Vn),[[j,i.quantite,void 0,{number:!0}]]),x(e("input",{"onUpdate:modelValue":M=>i.unite=M,type:"text",placeholder:"Unité",required:"",class:"form-input"},null,8,An),[[j,i.unite]]),e("button",{type:"button",onClick:M=>N(p),class:"remove-produit-btn"},[...t[41]||(t[41]=[e("svg",{class:"remove-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Un)]))),128))])]),e("div",In,[e("button",{type:"button",onClick:A,class:"btn btn-secondary"}," Annuler "),e("button",En,n(c.value?"Modifier":"Créer"),1)])],32)])])])):_("",!0)]))}}),Fn=K(Hn,[["__scopeId","data-v-18aae7b6"]]);export{Fn as default};
