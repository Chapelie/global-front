import{c as l,e,o as a,d as fe,u as ye,b as we,z as be,a as m,l as he,A as _e,h as x,s as u,f as i,n as w,t as n,N as H,j as k,I as V,J as $,w as R,i as p,v as f,m as J,$ as ke,K as Z,L as K,Z as Ce,q as Q,p as Ue,M as Me,_ as Ve}from"./main-C7B5hG3I.js";import{r as P}from"./UserGroupIcon-BNTbmO21.js";import{r as $e}from"./ShieldCheckIcon-CAQXAUdo.js";import{r as z}from"./CogIcon-BM-tHYUv.js";import{r as W,a as X,b as Y}from"./TrashIcon-DBaqJnjP.js";function Re(B,j){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Ae(B,j){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}const Pe={class:"personnel-container min-h-screen bg-gray-50"},je={class:"header-content bg-white border-b border-gray-200 shadow-sm"},Ee={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ne={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Le={class:"flex items-center mb-4 sm:mb-0"},De={class:"h-12 w-12 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 flex items-center justify-center shadow-lg mr-4"},qe={class:"flex space-x-3"},ze={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Be={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Se={class:"stat-card bg-white rounded-xl shadow-lg overflow-hidden"},Ge={class:"stat-content p-6"},Ie={class:"flex items-center"},Oe={class:"h-12 w-12 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center shadow-lg"},Te={class:"ml-4"},Fe={class:"stat-value text-2xl font-bold text-gray-900"},He={class:"stat-card bg-white rounded-xl shadow-lg overflow-hidden"},Je={class:"stat-content p-6"},Ze={class:"flex items-center"},Ke={class:"h-12 w-12 rounded-xl bg-gradient-to-r from-green-500 to-green-600 flex items-center justify-center shadow-lg"},Qe={class:"ml-4"},We={class:"stat-value text-2xl font-bold text-gray-900"},Xe={class:"stat-card bg-white rounded-xl shadow-lg overflow-hidden"},Ye={class:"stat-content p-6"},et={class:"flex items-center"},tt={class:"h-12 w-12 rounded-xl bg-gradient-to-r from-orange-500 to-orange-600 flex items-center justify-center shadow-lg"},st={class:"ml-4"},ot={class:"stat-value text-2xl font-bold text-gray-900"},rt={class:"bg-white rounded-xl shadow-lg overflow-hidden"},at={class:"border-b border-gray-200"},nt={class:"flex"},lt={key:0,class:"p-6"},it={class:"flex justify-between items-center mb-6"},dt={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200"},ct={class:"bg-white divide-y divide-gray-200"},mt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"flex items-center"},gt={class:"h-10 w-10 rounded-full bg-gradient-to-r from-orange-500 to-orange-600 flex items-center justify-center shadow-lg mr-4"},xt={class:"text-sm font-bold text-white"},vt={class:"text-sm font-medium text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap"},_t={class:"px-6 py-4 whitespace-nowrap"},kt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ut={class:"flex space-x-2"},Mt=["onClick"],Vt=["onClick"],$t={key:0,class:"text-center py-12"},Rt={key:1,class:"p-6"},At={class:"flex justify-between items-center mb-6"},Pt={class:"overflow-x-auto"},jt={class:"min-w-full divide-y divide-gray-200"},Et={class:"bg-white divide-y divide-gray-200"},Nt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"flex items-center"},Dt={class:"text-sm font-medium text-gray-900"},qt={class:"text-sm text-gray-500"},zt={class:"px-6 py-4"},Bt={class:"text-sm text-gray-900"},St={class:"px-6 py-4"},Gt={class:"flex flex-wrap gap-1"},It={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Ot={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm font-medium text-gray-900"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ht={class:"flex space-x-2"},Jt=["onClick"],Zt=["onClick"],Kt={key:0,class:"text-center py-12"},Qt={class:"modal-header-content bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4"},Wt={class:"flex items-center justify-between"},Xt={class:"modal-title text-lg font-semibold text-white"},Yt={class:"modal-subtitle text-sm text-orange-100"},es={class:"modal-body-content px-6 py-6 max-h-96 overflow-y-auto"},ts=["value"],ss={key:0,class:"mt-1 text-sm text-gray-500"},os={key:0},rs={class:"relative"},as=["type"],ns={key:1},ls={class:"flex items-center"},is={class:"modal-footer-content bg-gray-50 px-6 py-4 flex justify-end space-x-3"},ds={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},us={class:"modal-container inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},cs={class:"modal-header-content bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4"},ms={class:"flex items-center justify-between"},ps={class:"modal-title text-lg font-semibold text-white"},gs={class:"modal-subtitle text-sm text-orange-100"},xs={class:"modal-body-content px-6 py-6 max-h-96 overflow-y-auto"},vs={class:"space-y-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3"},fs=["value"],ys={class:"ml-2 text-sm text-gray-900"},ws={class:"modal-footer-content bg-gray-50 px-6 py-4 flex justify-end space-x-3"},bs=fe({__name:"PersonnelView",setup(B){const{getUsers:j,addUser:ee,updateUser:te,deleteUser:se,getRoles:oe,createRole:re,updateRole:ae,deleteRole:ne}=ye(),{currentUser:hs}=we(),{canDeletePersonnel:le}=be(),b=m([]),h=m([]),A=m(!1),E=m(!1),r=m(null),d=m(null),g=m(!1),y=m(!1),S=m(!1),C=m(!1),v=m("users"),ie=m({first_name:"",last_name:"",email:"",phone:"",role:"operator",password:"",password_confirmation:"",actif:!0}),de=m({id:0,name:"",display_name:"",description:"",permissions:[],color:"blue"}),N=[{id:1,name:"super_admin",display_name:"Super Administrateur",description:"Acc√®s complet √† tous les modules et fonctionnalit√©s",permissions:["all"],color:"red"},{id:2,name:"admin",display_name:"Administrateur",description:"Gestion des utilisateurs et acc√®s √† tous les modules",permissions:["users.manage","dashboard.view","production.manage","logistics.manage","inventory.manage"],color:"orange"},{id:3,name:"manager",display_name:"Manager",description:"Gestion g√©n√©rale avec acc√®s √† la plupart des modules",permissions:["dashboard.view","production.manage","logistics.manage","inventory.manage"],color:"purple"},{id:4,name:"operator",display_name:"Op√©rateur",description:"Acc√®s en lecture √† la plupart des modules",permissions:["dashboard.view","production.view","logistics.view","inventory.view"],color:"indigo"},{id:5,name:"production_manager",display_name:"Responsable Production",description:"Gestion compl√®te de la production",permissions:["production.manage","production.view","inventory.view","dashboard.production"],color:"blue"},{id:6,name:"production_operator",display_name:"Op√©rateur Production",description:"Op√©rations de production",permissions:["production.view","production.create","inventory.view"],color:"green"},{id:7,name:"logistics_manager",display_name:"Responsable Logistique",description:"Gestion des livraisons et logistique",permissions:["logistics.manage","logistics.view","customers.manage","dashboard.logistics"],color:"yellow"},{id:8,name:"logistics_operator",display_name:"Op√©rateur Logistique",description:"Op√©rations de livraison",permissions:["logistics.view","logistics.create","customers.view"],color:"indigo"},{id:9,name:"inventory_manager",display_name:"Responsable Inventaire",description:"Gestion des stocks et inventaire",permissions:["inventory.manage","inventory.view","products.manage"],color:"purple"},{id:10,name:"viewer",display_name:"Consultant",description:"Acc√®s en lecture seule",permissions:["dashboard.view","production.view","logistics.view","inventory.view"],color:"gray"}],ue=he(()=>b.value.filter(o=>o.actif).length),L=o=>b.value.filter(t=>t.role===o).length,ce=o=>{const t=N.find(s=>s.name===o);return t?t.display_name:o},G=o=>{const t=N.find(s=>s.name===o);return t?t.color:"gray"};_e(async()=>{await D(),await q()});const D=async()=>{try{S.value=!0;const o=await j();b.value=o.map(t=>{let s=t.first_name||"",c=t.last_name||"";if(!s&&!c&&t.name){const _=t.name.split(" ",2);s=_[0]||"",c=_[1]||""}return{id:t.id,name:t.name,first_name:s,last_name:c,email:t.email,phone:t.phone,role:t.roles?.[0]?.name||t.role||"user",password:"",password_confirmation:"",actif:t.actif!==!1}})}catch(o){console.error("Erreur lors du chargement des utilisateurs:",o),alert("Erreur lors du chargement des utilisateurs")}finally{S.value=!1}},q=async()=>{try{const o=await oe();console.log("‚úÖ [PersonnelView] R√¥les charg√©s depuis l'API:",o),h.value=o}catch(o){console.error("‚ùå [PersonnelView] Erreur lors du chargement des r√¥les:",o),h.value=N,console.warn("‚ö†Ô∏è [PersonnelView] Utilisation des r√¥les pr√©d√©finis")}},I=o=>{console.log("üîµ [PersonnelView] openUserModal appel√© avec:",o?"user":"nouveau"),o?(r.value={...o,first_name:o.first_name||"",last_name:o.last_name||"",password:"",password_confirmation:"",actif:o.actif!==!1},g.value=!0):(r.value={...ie.value,first_name:"",last_name:"",email:"",phone:"",role:"operator",password:"",password_confirmation:"",actif:!0},g.value=!1),console.log("üîµ [PersonnelView] editingUser initialis√©:",r.value),console.log("üîµ [PersonnelView] showUserModal sera:",!0),A.value=!0,C.value=!1,console.log("üîµ [PersonnelView] showUserModal est maintenant:",A.value)},U=()=>{A.value=!1,r.value=null,g.value=!1},O=o=>{o?(d.value={...o},y.value=!0):(d.value={...de.value},y.value=!1),E.value=!0},M=()=>{E.value=!1,d.value=null,y.value=!1},T=async()=>{if(!r.value){console.error("‚ùå [PersonnelView] editingUser est null");return}try{const o={first_name:r.value.first_name||"",last_name:r.value.last_name||"",email:r.value.email,phone:r.value.phone||null,role:r.value.role};if(!g.value){if(!r.value.password||r.value.password.length<8){alert("Le mot de passe est requis et doit contenir au moins 8 caract√®res");return}if(r.value.password!==r.value.password_confirmation){alert("Les mots de passe ne correspondent pas");return}o.password=r.value.password}if(console.log("üì§ [PersonnelView] Envoi des donn√©es:",{isEditing:g.value,userData:{...o,password:o.password?"***":void 0}}),g.value)await te(r.value.id,o),console.log("‚úÖ [PersonnelView] Utilisateur mis √† jour");else{const t=await ee(o);console.log("‚úÖ [PersonnelView] Utilisateur cr√©√©:",t)}await D(),U(),alert(g.value?"Utilisateur mis √† jour avec succ√®s":"Utilisateur cr√©√© avec succ√®s")}catch(o){console.error("‚ùå [PersonnelView] Erreur lors de la sauvegarde:",o);const t=o?.response?.data?.error||o?.response?.data?.message||o?.message||"Erreur lors de la sauvegarde de l'utilisateur";if(o?.response?.data?.errors){const s=Object.entries(o.response.data.errors).map(([c,_])=>`${c}: ${Array.isArray(_)?_.join(", "):_}`).join(`
`);alert(`Erreurs de validation:
${s}`)}else alert(t)}},me=async o=>{const t=o.first_name&&o.last_name?`${o.first_name} ${o.last_name}`:o.name||"cet utilisateur";if(confirm(`√ätes-vous s√ªr de vouloir supprimer l'utilisateur ${t} ?`))try{await se(o.id),await D()}catch(s){console.error("Erreur lors de la suppression de l'utilisateur:",s),alert("Erreur lors de la suppression de l'utilisateur")}},F=async()=>{if(d.value)try{y.value?await ae(d.value.id,d.value):await re(d.value),await q(),M()}catch(o){console.error("Erreur lors de la sauvegarde du r√¥le:",o),alert("Erreur lors de la sauvegarde du r√¥le")}},pe=async o=>{if(confirm(`√ätes-vous s√ªr de vouloir supprimer le r√¥le ${o.display_name} ?`))try{await ne(o.id),await q()}catch(t){console.error("Erreur lors de la suppression du r√¥le:",t),alert("Erreur lors de la suppression du r√¥le")}},ge=o=>new Date(o).toLocaleDateString("fr-FR"),xe=()=>{C.value=!C.value},ve=()=>{const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let t="";for(let s=0;s<12;s++)t+=o.charAt(Math.floor(Math.random()*o.length));r.value&&(r.value.password=t,r.value.password_confirmation=t)};return(o,t)=>(a(),l("div",Pe,[e("div",je,[e("div",Ee,[e("div",Ne,[e("div",Le,[e("div",De,[u(i(P),{class:"h-6 w-6 text-white"})]),t[20]||(t[20]=e("div",null,[e("h1",{class:"page-title text-2xl font-bold text-gray-900"},"Gestion du Personnel"),e("p",{class:"text-sm text-gray-600"},"Utilisateurs et r√¥les du syst√®me")],-1))]),e("div",qe,[e("button",{onClick:t[0]||(t[0]=s=>v.value="users"),class:w(["px-4 py-2 rounded-lg font-medium transition-all duration-200",v.value==="users"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Utilisateurs ",2),e("button",{onClick:t[1]||(t[1]=s=>v.value="roles"),class:w(["px-4 py-2 rounded-lg font-medium transition-all duration-200",v.value==="roles"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," R√¥les ",2)])])])]),e("div",ze,[e("div",Be,[e("div",Se,[e("div",Ge,[e("div",Ie,[e("div",Oe,[u(i(P),{class:"h-6 w-6 text-white"})]),e("div",Te,[t[21]||(t[21]=e("p",{class:"text-sm font-medium text-gray-600"},"Total utilisateurs",-1)),e("p",Fe,n(b.value.length),1)])])])]),e("div",He,[e("div",Je,[e("div",Ze,[e("div",Ke,[u(i(H),{class:"h-6 w-6 text-white"})]),e("div",Qe,[t[22]||(t[22]=e("p",{class:"text-sm font-medium text-gray-600"},"Utilisateurs actifs",-1)),e("p",We,n(ue.value),1)])])])]),e("div",Xe,[e("div",Ye,[e("div",et,[e("div",tt,[u(i($e),{class:"h-6 w-6 text-white"})]),e("div",st,[t[23]||(t[23]=e("p",{class:"text-sm font-medium text-gray-600"},"Administrateurs",-1)),e("p",ot,n(L("admin")+L("super_admin")),1)])])])])]),e("div",rt,[e("div",at,[e("nav",nt,[e("button",{onClick:t[2]||(t[2]=s=>v.value="users"),class:w(["flex-1 px-6 py-4 text-sm font-medium text-center transition-all duration-200",v.value==="users"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-b-2 border-orange-500":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"])},[u(i(P),{class:"h-5 w-5 mx-auto mb-2"}),t[24]||(t[24]=k(" Utilisateurs ",-1))],2),e("button",{onClick:t[3]||(t[3]=s=>v.value="roles"),class:w(["flex-1 px-6 py-4 text-sm font-medium text-center transition-all duration-200",v.value==="roles"?"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-b-2 border-orange-500":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"])},[u(i(z),{class:"h-5 w-5 mx-auto mb-2"}),t[25]||(t[25]=k(" R√¥les ",-1))],2)])]),v.value==="users"?(a(),l("div",lt,[e("div",it,[t[27]||(t[27]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Liste des utilisateurs",-1)),e("button",{onClick:t[4]||(t[4]=s=>I()),class:"action-button inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-medium rounded-xl shadow-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105"},[u(i(W),{class:"h-5 w-5 mr-2"}),t[26]||(t[26]=k(" Nouvel utilisateur ",-1))])]),e("div",dt,[e("table",ut,[t[28]||(t[28]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"T√©l√©phone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"R√¥le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cr√©√© le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ct,[(a(!0),l(V,null,$(b.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",mt,[e("div",pt,[e("div",gt,[e("span",xt,n((s.first_name||s.name||"?").charAt(0).toUpperCase()),1)]),e("div",null,[e("div",vt,n(s.first_name&&s.last_name?`${s.first_name} ${s.last_name}`:s.name||"Nom non d√©fini"),1)])])]),e("td",ft,[e("div",yt,n(s.email),1)]),e("td",wt,[e("div",bt,n(s.phone||"N/A"),1)]),e("td",ht,[e("span",{class:w(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",`bg-${G(s.role)}-100 text-${G(s.role)}-800`])},n(ce(s.role)),3)]),e("td",_t,[e("span",{class:w(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",s.actif?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[(a(),Z(K(s.actif?i(H):i(Me)),{class:"h-3 w-3 mr-1"})),k(" "+n(s.actif?"Actif":"Inactif"),1)],2)]),e("td",kt,n(s.created_at?ge(s.created_at):"N/A"),1),e("td",Ct,[e("div",Ut,[e("button",{onClick:c=>I(s),class:"text-orange-600 hover:text-orange-900 transition-colors"},[u(i(X),{class:"h-4 w-4"})],8,Mt),i(le)?(a(),l("button",{key:0,onClick:c=>me(s),class:"text-red-600 hover:text-red-900 transition-colors"},[u(i(Y),{class:"h-4 w-4"})],8,Vt)):x("",!0)])])]))),128))])])]),b.value.length===0?(a(),l("div",$t,[u(i(P),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t[29]||(t[29]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun utilisateur trouv√©",-1)),t[30]||(t[30]=e("p",{class:"text-gray-600"},"Commencez par cr√©er votre premier utilisateur.",-1))])):x("",!0)])):x("",!0),v.value==="roles"?(a(),l("div",Rt,[e("div",At,[t[32]||(t[32]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Liste des r√¥les",-1)),e("button",{onClick:t[5]||(t[5]=s=>O()),class:"action-button inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-medium rounded-xl shadow-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105"},[u(i(W),{class:"h-5 w-5 mr-2"}),t[31]||(t[31]=k(" Nouveau r√¥le ",-1))])]),e("div",Pt,[e("table",jt,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"R√¥le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Permissions"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Et,[(a(!0),l(V,null,$(h.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Nt,[e("div",Lt,[e("div",{class:w(["h-10 w-10 rounded-xl flex items-center justify-center shadow-lg mr-4",`bg-gradient-to-r from-${s.color}-500 to-${s.color}-600`])},[u(i(z),{class:"h-5 w-5 text-white"})],2),e("div",null,[e("div",Dt,n(s.display_name),1),e("div",qt,n(s.name),1)])])]),e("td",zt,[e("div",Bt,n(s.description),1)]),e("td",St,[e("div",Gt,[(a(!0),l(V,null,$(s.permissions.slice(0,3),c=>(a(),l("span",{key:c,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},n(c),1))),128)),s.permissions.length>3?(a(),l("span",It," +"+n(s.permissions.length-3)+" autres ",1)):x("",!0)])]),e("td",Ot,[e("div",Tt,n(L(s.name)),1)]),e("td",Ft,[e("div",Ht,[e("button",{onClick:c=>O(s),class:"text-orange-600 hover:text-orange-900 transition-colors"},[u(i(X),{class:"h-4 w-4"})],8,Jt),e("button",{onClick:c=>pe(s),class:"text-red-600 hover:text-red-900 transition-colors"},[u(i(Y),{class:"h-4 w-4"})],8,Zt)])])]))),128))])])]),h.value.length===0?(a(),l("div",Kt,[u(i(z),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t[34]||(t[34]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Aucun r√¥le trouv√©",-1)),t[35]||(t[35]=e("p",{class:"text-gray-600"},"Commencez par cr√©er votre premier r√¥le.",-1))])):x("",!0)])):x("",!0)])]),A.value&&r.value?(a(),l("div",{key:0,class:"fixed inset-0",style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"9999",display:"flex","align-items":"center","justify-content":"center"},onClick:R(U,["self"])},[e("div",{class:"absolute inset-0 bg-black",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0, 0, 0, 0.5)","z-index":"1"},onClick:U}),e("div",{class:"relative bg-white rounded-xl shadow-xl w-full max-w-lg mx-4",style:{position:"relative","z-index":"10",background:"white","max-width":"32rem",margin:"0 auto","max-height":"90vh","overflow-y":"auto"},onClick:t[14]||(t[14]=R(()=>{},["stop"]))},[e("div",Qt,[e("div",Wt,[e("div",null,[e("h3",Xt,n(g.value?"Modifier l'utilisateur":"Nouvel utilisateur"),1),e("p",Yt,n(g.value?"Modifiez les informations":"Renseignez les informations"),1)]),e("button",{onClick:U,class:"text-orange-200 hover:text-white transition-colors"},[...t[36]||(t[36]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",es,[e("form",{onSubmit:R(T,["prevent"]),class:"space-y-4"},[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pr√©nom *",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.first_name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,r.value.first_name]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>r.value.last_name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,r.value.last_name]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),p(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>r.value.email=s),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,r.value.email]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"T√©l√©phone",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>r.value.phone=s),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,r.value.phone]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"R√¥le *",-1)),p(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.value.role=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},[t[41]||(t[41]=e("option",{value:""},"S√©lectionner un r√¥le",-1)),(a(!0),l(V,null,$(h.value,s=>(a(),l("option",{key:s.id||s.name,value:s.name},n(s.display_name||s.name),9,ts))),128))],512),[[J,r.value.role]]),h.value.length===0?(a(),l("p",ss,"Chargement des r√¥les...")):x("",!0)]),g.value?x("",!0):(a(),l("div",os,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe *",-1)),e("div",rs,[p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>r.value.password=s),type:C.value?"text":"password",required:"",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,8,as),[[ke,r.value.password]]),e("button",{type:"button",onClick:xe,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[(a(),Z(K(C.value?i(Re):i(Ce)),{class:"h-5 w-5 text-gray-400"}))])]),e("button",{type:"button",onClick:ve,class:"mt-2 text-sm text-orange-600 hover:text-orange-800 flex items-center"},[u(i(Ae),{class:"h-4 w-4 mr-1"}),t[43]||(t[43]=k(" G√©n√©rer un mot de passe ",-1))])])),g.value?x("",!0):(a(),l("div",ns,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le mot de passe *",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>r.value.password_confirmation=s),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,r.value.password_confirmation]])])),e("div",ls,[p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>r.value.actif=s),type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"},null,512),[[Q,r.value.actif]]),t[46]||(t[46]=e("label",{class:"ml-2 block text-sm text-gray-900"}," Utilisateur actif ",-1))])],32)]),e("div",is,[e("button",{onClick:U,class:"btn-cancel px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"}," Annuler "),e("button",{onClick:T,class:"btn-submit px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg hover:from-orange-600 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"},n(g.value?"Modifier":"Cr√©er"),1)])])])):x("",!0),E.value?(a(),l("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto mobile-modal-container",onClick:R(M,["self"])},[e("div",ds,[e("div",{class:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:M}),e("div",us,[e("div",cs,[e("div",ms,[e("div",null,[e("h3",ps,n(y.value?"Modifier le r√¥le":"Nouveau r√¥le"),1),e("p",gs,n(y.value?"Modifiez les informations":"Renseignez les informations"),1)]),e("button",{onClick:M,class:"text-orange-200 hover:text-white transition-colors"},[...t[47]||(t[47]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",xs,[e("form",{onSubmit:R(F,["prevent"]),class:"space-y-4"},[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du r√¥le *",-1)),p(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>d.value.name=s),type:"text",required:"",placeholder:"Ex: custom_role",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,d.value.name]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom d'affichage *",-1)),p(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>d.value.display_name=s),type:"text",required:"",placeholder:"Ex: R√¥le Personnalis√©",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,d.value.display_name]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=s=>d.value.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},null,512),[[f,d.value.description]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),p(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>d.value.color=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"},[...t[51]||(t[51]=[Ue('<option value="blue" data-v-b93e4dc2>Bleu</option><option value="green" data-v-b93e4dc2>Vert</option><option value="red" data-v-b93e4dc2>Rouge</option><option value="yellow" data-v-b93e4dc2>Jaune</option><option value="orange" data-v-b93e4dc2>Orange</option><option value="purple" data-v-b93e4dc2>Violet</option><option value="indigo" data-v-b93e4dc2>Indigo</option><option value="gray" data-v-b93e4dc2>Gris</option>',8)])],512),[[J,d.value.color]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Permissions",-1)),e("div",vs,[(a(),l(V,null,$(["all","users.manage","dashboard.view","production.manage","production.view","logistics.manage","logistics.view","inventory.manage","inventory.view","customers.manage","customers.view","products.manage","products.view"],s=>e("label",{key:s,class:"flex items-center"},[p(e("input",{"onUpdate:modelValue":t[19]||(t[19]=c=>d.value.permissions=c),value:s,type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"},null,8,fs),[[Q,d.value.permissions]]),e("span",ys,n(s),1)])),64))])])],32)]),e("div",ws,[e("button",{onClick:M,class:"btn-cancel px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"}," Annuler "),e("button",{onClick:F,class:"btn-submit px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg hover:from-orange-600 hover:to-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"},n(y.value?"Modifier":"Cr√©er"),1)])])])])):x("",!0)]))}}),Vs=Ve(bs,[["__scopeId","data-v-b93e4dc2"]]);export{Vs as default};
