import{d as z,x as N,r as d,p as A,y as O,c as v,a as e,f as V,t as n,g as a,v as i,q as y,i as D,h as C,F as H,z as I,w as _,n as Q,o as c,A as $}from"./index-D0gnmK0b.js";const P={class:"analyses-container"},G={class:"analyses-stats"},J={class:"stat-card"},K={class:"stat-content"},W={class:"stat-value"},X={class:"stat-card"},Y={class:"stat-content"},Z={class:"stat-value"},ee={class:"stat-card"},te={class:"stat-content"},se={class:"stat-value"},oe={class:"analyses-filters"},le={class:"filter-group"},ae={class:"filter-group"},ne={class:"filter-group"},ie={class:"analyses-actions"},re={class:"analyses-grid"},de={class:"analyse-header"},ue={class:"analyse-title"},ve={class:"analyse-content"},ce={class:"analyse-info"},pe={class:"info-item"},me={class:"info-value"},fe={class:"info-item"},be={class:"info-value"},ye={key:0,class:"info-item"},we={class:"info-value"},ge={key:0,class:"analyse-description"},ke={class:"analyse-actions"},Ae=["onClick"],Ve=["onClick"],Ce={class:"modal-header"},Se={class:"modal-title"},xe={class:"form-group"},De={class:"form-group"},_e={class:"form-group"},Me={class:"form-row"},Te={class:"form-group"},he={class:"form-group"},qe={class:"form-group"},Fe={class:"form-group"},Ue={class:"form-group"},Le={class:"form-group"},Be={class:"modal-actions"},Ee={type:"submit",class:"btn btn-primary"},Re=z({__name:"AnalysesView",setup(je){const{getAnalyses:M,addAnalyse:T,updateAnalyse:h,deleteAnalyse:q}=N(),u=d([]),w=d(!1),r=d(null),p=d(""),m=d(""),f=d(""),l=d({nom:"",type:"qualite",description:"",dateDebut:new Date().toISOString().split("T")[0],dateFin:"",statut:"en_cours",resultats:"",observations:"",recommandations:"",donnees:{},dateAnalyse:new Date().toISOString()}),F=A(()=>u.value.filter(o=>o.statut==="en_cours").length),U=A(()=>u.value.filter(o=>o.statut==="termine").length),L=A(()=>u.value.filter(o=>{const t=o.nom.toLowerCase().includes(p.value.toLowerCase())||o.description?.toLowerCase().includes(p.value.toLowerCase()),s=!m.value||o.type===m.value,k=!f.value||o.statut===f.value;return t&&s&&k})),g=async()=>{try{console.log("üîç [AnalysesView] Chargement des analyses..."),u.value=await M(),console.log("‚úÖ [AnalysesView] Analyses charg√©es:",u.value.length)}catch(o){console.error("‚ùå [AnalysesView] Erreur lors du chargement des analyses:",o)}},S=o=>{o?(r.value=o,l.value={nom:o.nom,type:o.type,description:o.description||"",dateDebut:o.dateDebut,dateFin:o.dateFin||"",statut:o.statut,resultats:o.resultats||"",observations:o.observations||"",recommandations:o.recommandations||"",donnees:o.donnees||{},dateAnalyse:o.dateAnalyse||new Date().toISOString()}):(r.value=null,l.value={nom:"",type:"qualite",description:"",dateDebut:new Date().toISOString().split("T")[0],dateFin:"",statut:"en_cours",resultats:"",observations:"",recommandations:"",donnees:{},dateAnalyse:new Date().toISOString()}),w.value=!0},b=()=>{w.value=!1,r.value=null},B=async()=>{try{console.log("üíæ [AnalysesView] Sauvegarde de l'analyse..."),r.value?(await h(r.value.id,l.value),console.log("‚úÖ [AnalysesView] Analyse mise √† jour")):(await T(l.value),console.log("‚úÖ [AnalysesView] Analyse cr√©√©e")),await g(),b()}catch(o){console.error("‚ùå [AnalysesView] Erreur lors de la sauvegarde:",o)}},E=async o=>{if(confirm("√ätes-vous s√ªr de vouloir supprimer cette analyse ?"))try{console.log("üóëÔ∏è [AnalysesView] Suppression de l'analyse:",o),await q(o),await g(),console.log("‚úÖ [AnalysesView] Analyse supprim√©e")}catch(t){console.error("‚ùå [AnalysesView] Erreur lors de la suppression:",t)}},R=o=>({en_cours:"En cours",termine:"Termin√©",annule:"Annul√©"})[o]||o,j=o=>({qualite:"Qualit√©",performance:"Performance",cout:"Co√ªt",rendement:"Rendement",autre:"Autre"})[o]||o,x=o=>new Date(o).toLocaleDateString("fr-FR");return O(()=>{g()}),(o,t)=>(c(),v("div",P,[t[43]||(t[43]=e("div",{class:"analyses-header"},[e("h1",{class:"analyses-title"},"Analyses"),e("p",{class:"analyses-subtitle"},"Gestion des analyses de qualit√©, performance et co√ªts")],-1)),e("div",G,[e("div",J,[t[15]||(t[15]=e("div",{class:"stat-icon"},[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",K,[e("div",W,n(u.value.length),1),t[14]||(t[14]=e("div",{class:"stat-label"},"Total analyses",-1))])]),e("div",X,[t[17]||(t[17]=e("div",{class:"stat-icon"},[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Y,[e("div",Z,n(F.value),1),t[16]||(t[16]=e("div",{class:"stat-label"},"En cours",-1))])]),e("div",ee,[t[19]||(t[19]=e("div",{class:"stat-icon"},[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",te,[e("div",se,n(U.value),1),t[18]||(t[18]=e("div",{class:"stat-label"},"Termin√©es",-1))])])]),e("div",oe,[e("div",le,[t[20]||(t[20]=e("label",{class:"filter-label"},"Recherche",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),type:"text",placeholder:"Rechercher une analyse...",class:"filter-input"},null,512),[[i,p.value]])]),e("div",ae,[t[22]||(t[22]=e("label",{class:"filter-label"},"Type",-1)),a(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),class:"filter-select"},[...t[21]||(t[21]=[D('<option value="" data-v-ccd46689>Tous les types</option><option value="qualite" data-v-ccd46689>Qualit√©</option><option value="performance" data-v-ccd46689>Performance</option><option value="cout" data-v-ccd46689>Co√ªt</option><option value="rendement" data-v-ccd46689>Rendement</option><option value="autre" data-v-ccd46689>Autre</option>',6)])],512),[[y,m.value]])]),e("div",ne,[t[24]||(t[24]=e("label",{class:"filter-label"},"Statut",-1)),a(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"filter-select"},[...t[23]||(t[23]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"en_cours"},"En cours",-1),e("option",{value:"termine"},"Termin√©",-1),e("option",{value:"annule"},"Annul√©",-1)])],512),[[y,f.value]])])]),e("div",ie,[e("button",{onClick:t[3]||(t[3]=s=>S()),class:"btn btn-primary"},[...t[25]||(t[25]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),C(" Nouvelle analyse ",-1)])])]),e("div",re,[(c(!0),v(H,null,I(L.value,s=>(c(),v("div",{key:s.id,class:"analyse-card"},[e("div",de,[e("h3",ue,n(s.nom),1),e("span",{class:Q(`statut-badge statut-${s.statut}`)},n(R(s.statut)),3)]),e("div",ve,[e("div",ce,[e("div",pe,[t[26]||(t[26]=e("span",{class:"info-label"},"Type:",-1)),e("span",me,n(j(s.type)),1)]),e("div",fe,[t[27]||(t[27]=e("span",{class:"info-label"},"D√©but:",-1)),e("span",be,n(x(s.dateDebut)),1)]),s.dateFin?(c(),v("div",ye,[t[28]||(t[28]=e("span",{class:"info-label"},"Fin:",-1)),e("span",we,n(x(s.dateFin)),1)])):V("",!0)]),s.description?(c(),v("div",ge,n(s.description),1)):V("",!0)]),e("div",ke,[e("button",{onClick:k=>S(s),class:"btn btn-secondary"},[...t[29]||(t[29]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),C(" Modifier ",-1)])],8,Ae),e("button",{onClick:k=>E(s.id),class:"btn btn-danger"},[...t[30]||(t[30]=[e("svg",{class:"btn-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),C(" Supprimer ",-1)])],8,Ve)])]))),128))]),w.value?(c(),v("div",{key:0,class:"modal-overlay",onClick:b},[e("div",{class:"modal-content",onClick:t[13]||(t[13]=_(()=>{},["stop"]))},[e("div",Ce,[e("h2",Se,n(r.value?"Modifier l'analyse":"Nouvelle analyse"),1),e("button",{onClick:b,class:"modal-close"},[...t[31]||(t[31]=[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:_(B,["prevent"]),class:"modal-form"},[e("div",xe,[t[32]||(t[32]=e("label",{class:"form-label"},"Nom de l'analyse *",-1)),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.nom=s),type:"text",required:"",class:"form-input",placeholder:"Ex: Analyse qualit√© Q1 2024"},null,512),[[i,l.value.nom]])]),e("div",De,[t[34]||(t[34]=e("label",{class:"form-label"},"Type *",-1)),a(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.type=s),required:"",class:"form-select"},[...t[33]||(t[33]=[D('<option value="qualite" data-v-ccd46689>Qualit√©</option><option value="performance" data-v-ccd46689>Performance</option><option value="cout" data-v-ccd46689>Co√ªt</option><option value="rendement" data-v-ccd46689>Rendement</option><option value="autre" data-v-ccd46689>Autre</option>',5)])],512),[[y,l.value.type]])]),e("div",_e,[t[35]||(t[35]=e("label",{class:"form-label"},"Description",-1)),a(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.description=s),class:"form-textarea",rows:"3",placeholder:"Description de l'analyse..."},null,512),[[i,l.value.description]])]),e("div",Me,[e("div",Te,[t[36]||(t[36]=e("label",{class:"form-label"},"Date de d√©but *",-1)),a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.dateDebut=s),type:"date",required:"",class:"form-input"},null,512),[[i,l.value.dateDebut]])]),e("div",he,[t[37]||(t[37]=e("label",{class:"form-label"},"Date de fin",-1)),a(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.dateFin=s),type:"date",class:"form-input"},null,512),[[i,l.value.dateFin]])])]),e("div",qe,[t[39]||(t[39]=e("label",{class:"form-label"},"Statut *",-1)),a(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.statut=s),required:"",class:"form-select"},[...t[38]||(t[38]=[e("option",{value:"en_cours"},"En cours",-1),e("option",{value:"termine"},"Termin√©",-1),e("option",{value:"annule"},"Annul√©",-1)])],512),[[y,l.value.statut]])]),e("div",Fe,[t[40]||(t[40]=e("label",{class:"form-label"},"R√©sultats",-1)),a(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.resultats=s),class:"form-textarea",rows:"4",placeholder:"R√©sultats de l'analyse..."},null,512),[[i,l.value.resultats]])]),e("div",Ue,[t[41]||(t[41]=e("label",{class:"form-label"},"Observations",-1)),a(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.value.observations=s),class:"form-textarea",rows:"3",placeholder:"Observations..."},null,512),[[i,l.value.observations]])]),e("div",Le,[t[42]||(t[42]=e("label",{class:"form-label"},"Recommandations",-1)),a(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.value.recommandations=s),class:"form-textarea",rows:"3",placeholder:"Recommandations..."},null,512),[[i,l.value.recommandations]])]),e("div",Be,[e("button",{type:"button",onClick:b,class:"btn btn-secondary"}," Annuler "),e("button",Ee,n(r.value?"Mettre √† jour":"Cr√©er"),1)])],32)])])):V("",!0)]))}}),Ne=$(Re,[["__scopeId","data-v-ccd46689"]]);export{Ne as default};
